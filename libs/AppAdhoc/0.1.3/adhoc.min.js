(function(e,g,f,h){h="https:"===f.location.protocol?"https:":"http:";var p=h+"//experiment.appadhoc.com/get_flags",q=h+"//api.appadhoc.com/optimizer/api/forceexp.php",r=h+"//tracking.appadhoc.com:"+("https:"===h?"23463":"23462");Date.now=Date.now||function(){return(new Date).getTime()};JSON.stringify=JSON.stringify||function(a){var d=typeof a;if("object"!=d||null===a)return"string"==d&&(a='"'+a+'"'),String(a);var b,c,e=[],f=a&&a.constructor==Array;for(b in a)c=a[b],d=typeof c,"string"==d?c='"'+c+
'"':"object"==d&&null!==c&&(c=JSON.stringify(c)),e.push((f?"":'"'+b+'":')+String(c));return(f?"[":"{")+String(e)+(f?"]":"}")};JSON.parse=JSON.parse||function(a){return eval("("+a+")")};var l=function(a,d,b){var c="";b&&(c="; expires="+(new Date(Date.now()+864E5*b)).toUTCString());g.cookie=a+"="+d+c+"; path=/"},m=function(){for(var a={},d=g.cookie.split(";"),b=0;b<d.length;b++){for(var c=d[b];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf("ADHOC_FLAG_")){var e=c.substring(11,c.indexOf("=")),c=
c.substring(c.indexOf("=")+1,c.length);"false"===c?c=!1:"true"===c?c=!0:"NaN"!=Number(c)&&(c=Number(c));a[e]=c}}return a},k=function(a,d,b){d=d||{};var c=new XMLHttpRequest;null!=b&&(c.onload=function(){var a=JSON.parse(this.responseText),c;for(c in a)l("ADHOC_FLAG_"+c,a[c],365);b(a)});c.open("POST",a||"");c.setRequestHeader("Content-Type","application/json;charset=UTF-8");c.send(JSON.stringify(d))},n=function(){var a=f.navigator.userAgent,d,b=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||
[];if(/trident/i.test(b[1]))return d=/\brv[ :]+(\d+)/g.exec(a)||[],{n:"IE",v:d[1]||""};if("Chrome"===b[1]&&(d=a.match(/\bOPR\/(\d+)/),null!=d))return{n:"Opera",v:d[1]};b=b[2]?[b[1],b[2]]:[f.navigator.appName,f.navigator.appVersion,"-?"];null!=(d=a.match(/version\/(\d+)/i))&&b.splice(1,1,d[1]);return{n:b[0],v:b[1]}};e.customs={};e.generateClientId=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};e.init=
function(a,d){e.ak=a;var b;a:{b=g.cookie.split(";");for(var c=0;c<b.length;c++){for(var f=b[c];" "==f.charAt(0);)f=f.substring(1);if(0===f.indexOf("ADHOC_MEMBERSHIP_CLIENT_ID")){b=f.substring(27,f.length);break a}}b=null}null==b&&(b=e.generateClientId(),l("ADHOC_MEMBERSHIP_CLIENT_ID",b,365));e.c=d||b;e.c=String(e.c)};e.getCachedExperimentFlags=function(){return m()};e.getExperimentFlags=function(a,d){a=a||function(){};d&&"function"==typeof d&&d(m());var b=n(),b={app_key:e.ak,summary:{OS:b.n,OS_version:b.v,
url:f.location.href,referrer:g.referrer,language:f.navigator.language,device_os_name:f.navigator.platform,height:f.innerHeight,width:f.innerWidth},custom:e.customs};null!=e.c&&(b.client_id=e.c);k(p,b,a)};e.incrementStat=function(a,d){var b=n(),b={adhoc_app_track_id:e.ak,client_id:e.c,event_type:"REPORT_STAT",timestamp:Math.round(Date.now()/1E3),summary:{OS:b.n,OS_version:b.v,url:f.location.href,referrer:g.referrer,language:f.navigator.language,device_os_name:f.navigator.platform,height:f.innerHeight,
width:f.innerWidth},stat_key:a,stat_value:d};k(r,b,null)};e.forceExperiment=function(a){k(q,{client_id:e.c,qr_code:a},null)};e.setProperties=function(a){e.customs=a}})(window.adhoc="undefined"!==typeof Object.create?Object.create(null):{},document,window);
