/* 二级城市联动：jquery.provincecity */
(function(){var Object$Province=['安徽','澳门','北京','福建','甘肃','广东','广西','贵州','海南','河北','河南','黑龙江','湖北','湖南','吉林','江苏','江西','辽宁','内蒙古','宁夏','青海','山东','山西','陕西','上海','四川','台湾','天津','西藏','香港','新疆','云南','浙江','重庆','海外'];var Object$City=[['合肥','安庆','蚌埠','亳州','巢湖','池州','滁州','阜阳','淮北','淮南','黄山','六安','马鞍山','宿州','铜陵','芜湖','宣城'],['澳门'],['昌平','朝阳','崇文','大兴','东城','房山','丰台','海淀','怀柔','门头沟','密云','平谷','石景山','顺义','通州','西城','宣武','延庆'],['福州','龙岩','南平','宁德','莆田','泉州','三明','厦门','漳州'],['兰州','白银','定西','甘南','嘉峪关','金昌','酒泉','临夏','陇南','平凉','庆阳','天水','武威','张掖'],['广州','潮州','东莞','佛山','河源','惠州','江门','揭阳','茂名','梅州','清远','汕头','汕尾','韶关','深圳','阳江','云浮','湛江','肇庆','中山','珠海'],['桂林','百色','北海','崇左','防城港','贵港','河池','贺州','来宾','柳州','南宁','钦州','梧州','玉林'],['贵阳','安顺','毕节','六盘水','黔东南','黔南','黔西南','铜仁','遵义'],['海口','白沙','保亭','昌江','澄迈','儋州','定安','东方','乐东','临高','陵水','南沙群岛','琼海','琼中','三亚','屯昌','万宁','文昌','五指山','西沙群岛','中沙群岛'],['石家庄','保定','沧州','承德','邯郸','衡水','廊坊','秦皇岛','唐山','邢台','张家口'],['郑州','安阳','鹤壁','焦作','开封','洛阳','漯河','南阳','平顶山','濮阳','三门峡','商丘','新乡','信阳','许昌','周口','驻马店'],['哈尔滨','大庆','大兴安岭','鹤岗','黑河','鸡西','佳木斯','牡丹江','七台河','齐齐哈尔','双鸭山','绥化','伊春'],['武汉','鄂州','恩施','黄冈','黄石','荆门','荆州','潜江','神农架','十堰','随州','天门','仙桃','咸宁','襄樊','孝感','宜昌'],['长沙','常德','郴州','衡阳','怀化','娄底','邵阳','湘潭','湘西','益阳','永州','岳阳','张家界','株洲'],['长春','白城','白山','吉林','辽源','四平','松原','通化','延边'],['南京','常州','淮安','连云港','南通','苏州','宿迁','泰州','无锡','徐州','盐城','扬州','镇江'],['南昌','抚州','赣州','吉安','景德镇','九江','萍乡','上饶','新余','宜春','鹰潭'],['沈阳','鞍山','本溪','朝阳','大连','丹东','抚顺','阜新','葫芦岛','锦州','辽阳','盘锦','铁岭','营口'],['呼和浩特','阿拉善','巴彦淖尔','包头','赤峰','鄂尔多斯','呼伦贝尔','通辽','乌海','乌兰察布','锡林郭勒','兴安'],['银川','固原','石嘴山','吴忠','中卫'],['西宁','果洛','海北','海东','海南','海西','黄南','玉树'],['济南','滨州','德州','东营','菏泽','济宁','莱芜','聊城','临沂','青岛','日照','泰安','威海','潍坊','烟台','枣庄','淄博'],['太原','长治','大同','晋城','晋中','临汾','吕梁','朔州','忻州','阳泉','运城'],['西安','安康','宝鸡','汉中','商洛','铜川','渭南','咸阳','延安','榆林'],['宝山','长宁','崇明','奉贤','虹口','黄浦','嘉定','金山','静安','卢湾','闵行','南汇','浦东','普陀','青浦','松江','徐汇','杨浦','闸北'],['成都','阿坝','巴中','达州','德阳','甘孜','广安','广元','乐山','凉山','泸州','眉山','绵阳','内江','南充','攀枝花','遂宁','雅安','宜宾','资阳','自贡'],['台北','阿莲','安定','安平','八德','八里','白河','白沙','板桥','褒忠','宝山','卑南','北斗','北港','北门','北埔','北投','补子','布袋','草屯','长宾','长治','潮州','车城','成功','城中区','池上','春日','刺桐','高雄','花莲','基隆','嘉义','苗栗','南投','屏东','台东','台南','台中','桃园','新竹','宜兰','彰化'],['宝坻','北辰','大港','东丽','汉沽','和平','河北','河东','河西','红桥','蓟县','津南','静海','南开','宁河','塘沽','武清','西青'],['拉萨','阿里','昌都','林芝','那曲','日喀则','山南'],['北区','大埔区','东区','观塘区','黄大仙区','九龙','葵青区','离岛区','南区','荃湾区','沙田区','深水埗区','屯门区','湾仔区','西贡区','香港','新界','油尖旺区','元朗区','中西区'],['乌鲁木齐','阿克苏','阿拉尔','阿勒泰','巴音郭楞','博尔塔拉','昌吉','哈密','和田','喀什','克拉玛依','克孜勒苏柯尔克孜','石河子','塔城','图木舒克','吐鲁番','五家渠','伊犁'],['昆明','保山','楚雄','大理','德宏','迪庆','红河','丽江','临沧','怒江','曲靖','思茅','文山','西双版纳','玉溪','昭通'],['杭州','湖州','嘉兴','金华','丽水','宁波','衢州','绍兴','台州','温州','舟山'],['巴南','北碚','璧山','长寿','城口','大渡口','大足','垫江','丰都','奉节','涪陵','合川','江北','江津','九龙坡','开县','梁平','南岸','南川','彭水','綦江','黔江','荣昌','沙坪坝','石柱','双桥','铜梁','潼南','万盛','万州','巫山','巫溪','武隆','秀山','永川','酉阳','渝北','渝中','云阳','忠县'],['阿根廷','埃及','爱尔兰','奥地利','奥克兰','澳大利亚','巴基斯坦','巴西','保加利亚','比利时','冰岛','朝鲜','丹麦','德国','俄罗斯','法国','菲律宾','芬兰','哥伦比亚','韩国','荷兰','加拿大','柬埔寨','喀麦隆','老挝','卢森堡','罗马尼亚','马达加斯加','马来西亚','毛里求斯','美国','秘鲁','缅甸','墨西哥','南非','尼泊尔','挪威','葡萄牙','其它地区','日本','瑞典','瑞士','斯里兰卡','泰国','土耳其','委内瑞拉','文莱','乌克兰','西班牙','希腊','新加坡','新西兰','匈牙利','以色列','意大利','印度','印度尼西亚','英国','越南','智利']];jQuery.fn.provincecity=function(opts){opts=jQuery.extend({selProvince:'selProvince',defProvinceVal:'北京',selCity:'selCity',defCityVal:'西城'},opts||{});var _sel1=jQuery('#'+opts.selProvince);var _sel2=jQuery('#'+opts.selCity);_sel1.append("<option value='"+opts.defProvinceVal+"'>"+opts.defProvinceVal+"</option>");jQuery.each(Object$Province,function(index,data){_sel1.append("<option value='"+data+"'>"+data+"</option>")});_sel2.append("<option value='"+opts.defCityVal+"'>"+opts.defCityVal+"</option>");var index1="";_sel1.change(function(){_sel2.empty();index1=this.selectedIndex;jQuery.each(Object$City[index1-1],function(index,data){_sel2.append("<option value='"+data+"'>"+data+"</option>")})});return this}})(jQuery);



/* 颜色选择器：jquery.colorPicker */
(function(){function colorPicker(){this._nextId=0;this._inst=[];this._curInst=null;this._colorpickerShowing=false;this._colorPickerDiv=jQuery('<div id="colorPickerDiv"></div>')}jQuery.extend(colorPicker.prototype,{markerClassName:'hasColorPicker',_register:function(inst){var id=this._nextId++;this._inst[id]=inst;return id},_getInst:function(id){return this._inst[id]||id},_doKeyDown:function(e){var inst=jQuery.colorPicker._getInst(this._colId);if(jQuery.colorPicker._colorpickerShowing){switch(e.keyCode){case 9:case 27:jQuery.colorPicker.hideColorPicker();break}}else if(e.keyCode==40){jQuery.colorPicker.showFor(this)}},_resetSample:function(e){var inst=jQuery.colorPicker._getInst(this._colId);inst._sampleSpan.css('background-color',inst._input.value);alert(inst._input.value)},_hasClass:function(element,className){var classes=element.attr('class');return(classes&&classes.indexOf(className)>-1)},showFor:function(control){control=(control.jquery?control[0]:(typeof control=='string'?jQuery(control)[0]:control));var input=(control.nodeName&&control.nodeName.toLowerCase()=='input'?control:this);if(jQuery.colorPicker._lastInput==input){return};if(jQuery.colorPicker._colorpickerShowing){return};var inst=jQuery.colorPicker._getInst(input._colId);jQuery.colorPicker.hideColorPicker();jQuery.colorPicker._lastInput=input;if(!jQuery.colorPicker._pos){jQuery.colorPicker._pos=jQuery.colorPicker._findPos(input);jQuery.colorPicker._pos[1]+=input.offsetHeight}var isFixed=false;jQuery(input).parents().each(function(){isFixed|=jQuery(this).css('position')=='fixed'});if(isFixed&&jQuery.browser.opera){jQuery.colorPicker._pos[0]-=document.documentElement.scrollLeft;jQuery.colorPicker._pos[1]-=document.documentElement.scrollTop};inst._colorPickerDiv.css('position',(jQuery.blockUI?'static':(isFixed?'fixed':'absolute'))).css('left',jQuery.colorPicker._pos[0]+'px').css('top',jQuery.colorPicker._pos[1]+1+'px');jQuery.colorPicker._pos=null;jQuery.colorPicker._showColorPicker(inst);return this},_findPos:function(obj){while(obj&&(obj.type=='hidden'||obj.nodeType!=1)){obj=obj.nextSibling}var curleft=curtop=0;if(obj&&obj.offsetParent){curleft=obj.offsetLeft;curtop=obj.offsetTop;while(obj=obj.offsetParent){var origcurleft=curleft;curleft+=obj.offsetLeft;if(curleft<0)curleft=origcurleft;curtop+=obj.offsetTop}};return[curleft,curtop]},_checkExternalClick:function(event){if(!jQuery.colorPicker._curInst)return;var target=jQuery(event.target);if((target.parents("#colorPickerDiv").length==0)&&jQuery.colorPicker._colorpickerShowing&&!(jQuery.blockUI))if(target.text()!=jQuery.colorPicker._curInst._colorPickerDiv.text())jQuery.colorPicker.hideColorPicker()},hideColorPicker:function(s){var inst=this._curInst;if(!inst)return;if(this._colorpickerShowing){this._colorpickerShowing=false;this._lastInput=null;this._colorPickerDiv.css('position','absolute').css('left','0px').css('top','-1000px');if(jQuery.blockUI){jQuery.unblockUI();jQuery('body').append(this._colorPickerDiv)}this._curInst=null}if(inst._input[0].value!=jQuery.css(inst._sampleSpan,'background-color')){inst._sampleSpan.css('background-color',inst._input[0].value)}this._showSelectBoxes()},_connectColorPicker:function(target,inst){var input=jQuery(target);if(this._hasClass(input,this.markerClassName)){return}jQuery(input).attr('autocomplete','OFF');inst._input=jQuery(input);inst._sampleSpan=jQuery('<span class="ColorPickerDivSample" style="background-color:'+inst._input[0].value+';height:'+inst._input[0].offsetHeight+';">&nbsp;</span>');input.after(inst._sampleSpan);inst._sampleSpan.click(function(){input.focus()});input.focus(this.showFor);input.addClass(this.markerClassName).keydown(this._doKeyDown);input[0]._colId=inst._id},_showColorPicker:function(id){var inst=this._getInst(id);this._updateColorPicker(inst);inst._colorPickerDiv.css('width',inst._startTime!=null?'10em':'6em');inst._colorPickerDiv.show('fast');if(inst._input[0].type!='hidden')inst._input[0].focus();this._curInst=inst;this._colorpickerShowing=true;this._hideSelectBoxes()},_updateColorPicker:function(inst){inst._colorPickerDiv.empty().append(inst._generateColorPicker());if(inst._input&&inst._input[0].type!='hidden'){inst._input[0].focus();jQuery("td.color",inst._timePickerDiv).unbind().mouseover(function(){inst._sampleSpan.css('background-color',jQuery.css(this,'background-color'))}).click(function(){inst._setValue(this)})}},_showSelectBoxes:function(){/*jQuery('SELECT').css('visibility','visible')*/},_hideSelectBoxes:function(){/*jQuery('SELECT').css('visibility','hidden')*/}});function ColorPickerInstance(){this._id=jQuery.colorPicker._register(this);this._input=null;this._colorPickerDiv=jQuery.colorPicker._colorPickerDiv;this._sampleSpan=null};jQuery.extend(ColorPickerInstance.prototype,{_get:function(name){return(this._settings[name]!=null?this._settings[name]:jQuery.colorPicker._defaults[name])},_getValue:function(){if(this._input&&this._input[0].type!='hidden'&&this._input[0].value!=""){return this._input[0].value}return null},_setValue:function(sel){if(this._input&&this._input[0].type!='hidden'){this._input[0].value=jQuery.attr(sel,'title');jQuery(this._input[0]).change()}jQuery.colorPicker.hideColorPicker()},_generateColorPicker:function(){var colors=new Array("#000000","#000033","#000066","#000099","#0000CC","#0000FF","#330000","#330033","#330066","#330099","#3300CC","#3300FF","#660000","#660033","#660066","#660099","#6600CC","#6600FF","#990000","#990033","#990066","#990099","#9900CC","#9900FF","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#003300","#003333","#003366","#003399","#0033CC","#0033FF","#333300","#333333","#333366","#333399","#3333CC","#3333FF","#663300","#663333","#663366","#663399","#6633CC","#6633FF","#993300","#993333","#993366","#993399","#9933CC","#9933FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#006600","#006633","#006666","#006699","#0066CC","#0066FF","#336600","#336633","#336666","#336699","#3366CC","#3366FF","#666600","#666633","#666666","#666699","#6666CC","#6666FF","#996600","#996633","#996666","#996699","#9966CC","#9966FF","#CC6600","#CC6633","#CC6666","#CC6699","#CC66CC","#CC66FF","#FF6600","#FF6633","#FF6666","#FF6699","#FF66CC","#FF66FF","#009900","#009933","#009966","#009999","#0099CC","#0099FF","#339900","#339933","#339966","#339999","#3399CC","#3399FF","#669900","#669933","#669966","#669999","#6699CC","#6699FF","#999900","#999933","#999966","#999999","#9999CC","#9999FF","#CC9900","#CC9933","#CC9966","#CC9999","#CC99CC","#CC99FF","#FF9900","#FF9933","#FF9966","#FF9999","#FF99CC","#FF99FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#66CC00","#66CC33","#66CC66","#66CC99","#66CCCC","#66CCFF","#99CC00","#99CC33","#99CC66","#99CC99","#99CCCC","#99CCFF","#CCCC00","#CCCC33","#CCCC66","#CCCC99","#CCCCCC","#CCCCFF","#FFCC00","#FFCC33","#FFCC66","#FFCC99","#FFCCCC","#FFCCFF","#00FF00","#00FF33","#00FF66","#00FF99","#00FFCC","#00FFFF","#33FF00","#33FF33","#33FF66","#33FF99","#33FFCC","#33FFFF","#66FF00","#66FF33","#66FF66","#66FF99","#66FFCC","#66FFFF","#99FF00","#99FF33","#99FF66","#99FF99","#99FFCC","#99FFFF","#CCFF00","#CCFF33","#CCFF66","#CCFF99","#CCFFCC","#CCFFFF","#FFFF00","#FFFF33","#FFFF66","#FFFF99","#FFFFCC","#EEEEEE","#111111","#222222","#333333","#444444","#555555","#666666","#777777","#888888","#999999","#A5A5A5","#AAAAAA","#BBBBBB","#C3C3C3","#CCCCCC","#D2D2D2","#DDDDDD","#E1E1E1","#FFFFFF");var total=colors.length;var width=18;var html="<table class='ColorPickerArea' cellspacing='0' cellpadding='0'>";for(var i=0;i<total;i++){if((i%width)==0){html+="<tr>"}html+='<td class="color" title="'+colors[i]+'" style="cursor: pointer;border: 1px solid #000000;background-color:'+colors[i]+'"><div style="width:9px;height:9px;"></div></td>';if(((i+1)>=total)||(((i+1)%width)==0)){html+="</tr>"}}html+="</table>";return html}});jQuery.fn.attachColorPicker=function(){return this.each(function(){var nodeName=this.nodeName.toLowerCase();if(nodeName=='input'){var inst=new ColorPickerInstance();jQuery.colorPicker._connectColorPicker(this,inst)}})};jQuery.fn.getValue=function(){var inst=(this.length>0?jQuery.colorPicker._getInst(this[0]._colId):null);return(inst?inst._getValue():null)};jQuery.fn.setValue=function(value){var inst=(this.length>0?jQuery.colorPicker._getInst(this[0]._colId):null);if(inst)inst._setValue(value)};jQuery(document).ready(function(){jQuery.colorPicker=new colorPicker();jQuery(document.body).append(jQuery.colorPicker._colorPickerDiv).mousedown(jQuery.colorPicker._checkExternalClick)})})(jQuery);



/* 右键菜单：jquery.ContextMenu */
(function(){var menu,shadow,trigger,content,hash,currentTarget;var defaults={menuStyle:{listStyle:'none',padding:'1px',margin:'0px',backgroundColor:'#fff',border:'1px solid #999',width:'100px'},itemStyle:{margin:'0px',color:'#000',display:'block',cursor:'default',padding:'3px',border:'1px solid #fff',backgroundColor:'transparent'},itemHoverStyle:{border:'1px solid #0a246a',backgroundColor:'#b6bdd2'},eventPosX:'pageX',eventPosY:'pageY',shadow:true,onContextMenu:null,onShowMenu:null};jQuery.fn.contextMenu=function(id,options){if(!menu){menu=jQuery('<div id="jqContextMenu"></div>').hide().css({position:'absolute',zIndex:'500'}).appendTo('body').bind('click',function(e){e.stopPropagation()})};if(!shadow){shadow=jQuery('<div></div>').css({backgroundColor:'#000',position:'absolute',opacity:0.2,zIndex:499}).appendTo('body').hide()};hash=hash||[];hash.push({id:id,menuStyle:jQuery.extend({},defaults.menuStyle,options.menuStyle||{}),itemStyle:jQuery.extend({},defaults.itemStyle,options.itemStyle||{}),itemHoverStyle:jQuery.extend({},defaults.itemHoverStyle,options.itemHoverStyle||{}),bindings:options.bindings||{},shadow:options.shadow||options.shadow===false?options.shadow:defaults.shadow,onContextMenu:options.onContextMenu||defaults.onContextMenu,onShowMenu:options.onShowMenu||defaults.onShowMenu,eventPosX:options.eventPosX||defaults.eventPosX,eventPosY:options.eventPosY||defaults.eventPosY});var index=hash.length-1;jQuery(this).bind('contextmenu',function(e){var bShowContext=(!!hash[index].onContextMenu)?hash[index].onContextMenu(e):true;if(bShowContext)display(index,this,e,options);return false});return this};function display(index,trigger,e,options){var cur=hash[index];content=jQuery('#'+cur.id).find('ul:first').clone(true);content.css(cur.menuStyle).find('li').css(cur.itemStyle).hover(function(){jQuery(this).css(cur.itemHoverStyle)},function(){jQuery(this).css(cur.itemStyle)}).find('img').css({verticalAlign:'middle',paddingRight:'2px'});menu.html(content);if(!!cur.onShowMenu)menu=cur.onShowMenu(e,menu);jQuery.each(cur.bindings,function(id,func){jQuery('#'+id,menu).bind('click',function(e){hide();func(trigger,currentTarget)})});menu.css({'left':e[cur.eventPosX],'top':e[cur.eventPosY]}).show();if(cur.shadow)shadow.css({width:menu.width(),height:menu.height(),left:e.pageX+2,top:e.pageY+2}).show();jQuery(document).one('click',hide)}function hide(){menu.hide();shadow.hide()}jQuery.contextMenu={defaults:function(userDefaults){jQuery.each(userDefaults,function(i,val){if(typeof val=='object'&&defaults[i]){jQuery.extend(defaults[i],val)}else defaults[i]=val})}}})(jQuery);jQuery(function(){jQuery('div.contextMenu').hide()});



/* 文件树状：jquery.fileTree */
(function(){jQuery.extend(jQuery.fn,{fileTree:function(o,h){if(!o)var o={};if(o.root==undefined)o.root='/';if(o.script==undefined)o.script='jqueryFileTree.aspx';if(o.folderEvent==undefined)o.folderEvent='click';if(o.expandSpeed==undefined)o.expandSpeed=500;if(o.collapseSpeed==undefined)o.collapseSpeed=500;if(o.expandEasing==undefined)o.expandEasing=null;if(o.collapseEasing==undefined)o.collapseEasing=null;if(o.multiFolder==undefined)o.multiFolder=true;if(o.loadMessage==undefined)o.loadMessage='Loading...';jQuery(this).each(function(){function showTree(c,t){jQuery(c).addClass('wait');jQuery(".jqueryFileTree.start").remove();jQuery.post(o.script,{dir:t},function(data){jQuery(c).find('.start').html('');jQuery(c).removeClass('wait').append(data);if(o.root==t)jQuery(c).find('UL:hidden').show();else jQuery(c).find('UL:hidden').slideDown({duration:o.expandSpeed,easing:o.expandEasing});bindTree(c)})}function bindTree(t){jQuery(t).find('LI A').bind(o.folderEvent,function(){if(jQuery(this).parent().hasClass('directory')){if(jQuery(this).parent().hasClass('collapsed')){if(!o.multiFolder){jQuery(this).parent().parent().find('UL').slideUp({duration:o.collapseSpeed,easing:o.collapseEasing});jQuery(this).parent().parent().find('LI.directory').removeClass('expanded').addClass('collapsed')}jQuery(this).parent().find('UL').remove();showTree(jQuery(this).parent(),escape(jQuery(this).attr('rel').match(/.*\//)));jQuery(this).parent().removeClass('collapsed').addClass('expanded')}else{jQuery(this).parent().find('UL').slideUp({duration:o.collapseSpeed,easing:o.collapseEasing});jQuery(this).parent().removeClass('expanded').addClass('collapsed')}}else{h(jQuery(this).attr('rel'))}return false});if(o.folderEvent.toLowerCase!='click')jQuery(t).find('LI A').bind('click',function(){return false})}jQuery(this).html('<ul class="jqueryFileTree start"><li class="wait">'+o.loadMessage+'<li></ul>');showTree(jQuery(this),escape(o.root))})}})})(jQuery);



/* jquery.cookie */
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1}var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000))}else{date=options.expires}expires='; expires='+date.toUTCString()}var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('')}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}};



/* jquery.form */
(function(){jQuery.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this}if(typeof options=='function')options={success:options};options=jQuery.extend({url:this.attr('action')||window.location.toString(),type:this.attr('method')||'GET'},options||{});var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this}var a=this.formToArray(options.semantic);if(options.data){options.extraData=options.data;for(var n in options.data)a.push({name:n,value:options.data[n]})}if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this}this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this}var q=jQuery.param(a);if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null}else options.data=q;var $form=this,callbacks=[];if(options.resetForm)callbacks.push(function(){$form.resetForm()});if(options.clearForm)callbacks.push(function(){$form.clearForm()});if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){jQuery(options.target).html(data).each(oldSuccess,arguments)})}else if(options.success)callbacks.push(options.success);options.success=function(data,status){for(var i=0,max=callbacks.length;i<max;i++)callbacks[i](data,status,$form)};var files=jQuery('input:file',this).fieldValue();var found=false;for(var j=0;j<files.length;j++)if(files[j])found=true;if(options.iframe||found){if(jQuery.browser.safari&&options.closeKeepAlive)jQuery.get(options.closeKeepAlive,fileUpload);else fileUpload()}else jQuery.ajax(options);this.trigger('form-submit-notify',[this,options]);return this;function fileUpload(){var form=$form[0];if(jQuery(':input[@name=submit]',form).length){alert('Error: Form elements must not be named "submit".');return}var opts=jQuery.extend({},jQuery.ajaxSettings,options);var id='jqFormIO'+(new Date().getTime());var $io=jQuery('<iframe id="'+id+'" name="'+id+'" />');var io=$io[0];if(jQuery.browser.msie||jQuery.browser.opera)io.src='javascript:false;document.write("");';$io.css({position:'absolute',top:'-1000px',left:'-1000px'});var xhr={responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){}};var g=opts.global;if(g&&!jQuery.active++)jQuery.event.trigger("ajaxStart");if(g)jQuery.event.trigger("ajaxSend",[xhr,opts]);var cbInvoked=0;var timedOut=0;var sub=form.clk;if(sub){var n=sub.name;if(n&&!sub.disabled){options.extraData=options.extraData||{};options.extraData[n]=sub.value;if(sub.type=="image"){options.extraData[name+'.x']=form.clk_x;options.extraData[name+'.y']=form.clk_y}}}setTimeout(function(){var t=$form.attr('target'),a=$form.attr('action');$form.attr({target:id,encoding:'multipart/form-data',enctype:'multipart/form-data',method:'POST',action:opts.url});if(opts.timeout)setTimeout(function(){timedOut=true;cb()},opts.timeout);var extraInputs=[];try{if(options.extraData)for(var n in options.extraData)extraInputs.push(jQuery('<input type="hidden" name="'+n+'" value="'+options.extraData[n]+'" />').appendTo(form)[0]);$io.appendTo('body');io.attachEvent?io.attachEvent('onload',cb):io.addEventListener('load',cb,false);form.submit()}finally{$form.attr('action',a);t?$form.attr('target',t):$form.removeAttr('target');jQuery(extraInputs).remove()}},10);function cb(){if(cbInvoked++)return;io.detachEvent?io.detachEvent('onload',cb):io.removeEventListener('load',cb,false);var operaHack=0;var ok=true;try{if(timedOut)throw'timeout';var data,doc;doc=io.contentWindow?io.contentWindow.document:io.contentDocument?io.contentDocument:io.document;if(doc.body==null&&!operaHack&&jQuery.browser.opera){operaHack=1;cbInvoked--;setTimeout(cb,100);return}xhr.responseText=doc.body?doc.body.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;xhr.getResponseHeader=function(header){var headers={'content-type':opts.dataType};return headers[header]};if(opts.dataType=='json'||opts.dataType=='script'){var ta=doc.getElementsByTagName('textarea')[0];xhr.responseText=ta?ta.value:xhr.responseText}else if(opts.dataType=='xml'&&!xhr.responseXML&&xhr.responseText!=null){xhr.responseXML=toXml(xhr.responseText)}data=jQuery.httpData(xhr,opts.dataType)}catch(e){ok=false;jQuery.handleError(opts,xhr,'error',e)}if(ok){opts.success(data,'success');if(g)jQuery.event.trigger("ajaxSuccess",[xhr,opts])}if(g)jQuery.event.trigger("ajaxComplete",[xhr,opts]);if(g&&!--jQuery.active)jQuery.event.trigger("ajaxStop");if(opts.complete)opts.complete(xhr,ok?'success':'error');setTimeout(function(){$io.remove();xhr.responseXML=null},100)};function toXml(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s)}else doc=(new DOMParser()).parseFromString(s,'text/xml');return(doc&&doc.documentElement&&doc.documentElement.tagName!='parsererror')?doc:null}}};jQuery.fn.ajaxForm=function(options){return this.ajaxFormUnbind().bind('submit.form-plugin',function(){jQuery(this).ajaxSubmit(options);return false}).each(function(){jQuery(":submit,input:image",this).bind('click.form-plugin',function(e){var $form=this.form;$form.clk=this;if(this.type=='image'){if(e.offsetX!=undefined){$form.clk_x=e.offsetX;$form.clk_y=e.offsetY}else if(typeof jQuery.fn.offset=='function'){var offset=jQuery(this).offset();$form.clk_x=e.pageX-offset.left;$form.clk_y=e.pageY-offset.top}else{$form.clk_x=e.pageX-this.offsetLeft;$form.clk_y=e.pageY-this.offsetTop}}setTimeout(function(){$form.clk=$form.clk_x=$form.clk_y=null},10)})})};jQuery.fn.ajaxFormUnbind=function(){this.unbind('submit.form-plugin');return this.each(function(){jQuery(":submit,input:image",this).unbind('click.form-plugin')})};jQuery.fn.formToArray=function(semantic){var a=[];if(this.length==0)return a;var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els)return a;for(var i=0,max=els.length;i<max;i++){var el=els[i];var n=el.name;if(!n)continue;if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el)a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});continue}var v=jQuery.fieldValue(el,true);if(v&&v.constructor==Array){for(var j=0,jmax=v.length;j<jmax;j++)a.push({name:n,value:v[j]})}else if(v!==null&&typeof v!='undefined')a.push({name:n,value:v})}if(!semantic&&form.clk){var inputs=form.getElementsByTagName("input");for(var i=0,max=inputs.length;i<max;i++){var input=inputs[i];var n=input.name;if(n&&!input.disabled&&input.type=="image"&&form.clk==input)a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y})}}return a};jQuery.fn.formSerialize=function(semantic){return jQuery.param(this.formToArray(semantic))};jQuery.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n)return;var v=jQuery.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++)a.push({name:n,value:v[i]})}else if(v!==null&&typeof v!='undefined')a.push({name:this.name,value:v})});return jQuery.param(a)};jQuery.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=jQuery.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length))continue;v.constructor==Array?jQuery.merge(val,v):val.push(v)}return val};jQuery.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(typeof successful=='undefined')successful=true;if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1))return null;if(tag=='select'){var index=el.selectedIndex;if(index<0)return null;var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=jQuery.browser.msie&&!(op.attributes['value'].specified)?op.text:op.value;if(one)return v;a.push(v)}}return a}return el.value};jQuery.fn.clearForm=function(){return this.each(function(){jQuery('input,select,textarea',this).clearFields()})};jQuery.fn.clearFields=jQuery.fn.clearInputs=function(){return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(t=='text'||t=='password'||tag=='textarea')this.value='';else if(t=='checkbox'||t=='radio')this.checked=false;else if(tag=='select')this.selectedIndex=-1})};jQuery.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType))this.reset()})};jQuery.fn.enable=function(b){if(b==undefined)b=true;return this.each(function(){this.disabled=!b})};jQuery.fn.select=function(select){if(select==undefined)select=true;return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio')this.checked=select;else if(this.tagName.toLowerCase()=='option'){var $sel=jQuery(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').select(false)}this.selected=select}})};function log(){if(jQuery.fn.ajaxSubmit.debug&&window.console&&window.console.log)window.console.log('[jquery.form] '+Array.prototype.join.call(arguments,''))}})(jQuery);



/* 提示框：jquery.jTips */
(function(){jQuery.fn.jtip=function(opts){opts=jQuery.extend({fade:false,gravity:'r'},opts||{});var tip=null,cancelHide=false;this.hover(function(){if(jQuery("#jtip").is("div")){return}if(jQuery(this).attr('tip')&&jQuery(this).attr('tip')!=""){jQuery.data(this,'cancel.jtip',true);var tip=jQuery.data(this,'active.jtip');if(!tip){tip=jQuery('<div id="jtip" class="jtip"><div id="jtip-inner" class="jtip-inner">'+jQuery(this).attr('tip')+'</div></div>');tip.css({position:'absolute',zIndex:1000});jQuery(this).attr('title','');jQuery.data(this,'active.jtip',tip)};var pos=jQuery.extend({},jQuery(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});tip.remove().css({top:0,left:0,visibility:'hidden',display:'block'}).appendTo(document.body);var actualWidth=tip[0].offsetWidth,actualHeight=tip[0].offsetHeight;switch(opts.gravity.charAt(0)){case'b':tip.css({top:pos.top+pos.height,left:pos.left});break;case't':tip.css({top:pos.top-actualHeight,left:pos.left});break;case'l':tip.css({top:pos.top+pos.height,left:pos.left-actualWidth});break;case'r':tip.css({top:pos.top+pos.height,left:pos.left});break}if(opts.fade){tip.css({opacity:0,display:'block',visibility:'visible'}).animate({opacity:1})}else{tip.css({visibility:'visible'})};bgiframe=jQuery('<iframe class="bgiframe" frameborder="0" scrolling="no" src="" style="display:block;position:absolute;z-index:999;'+'top:'+(jQuery('#jtip').offset().top)+'px;'+'left:'+(jQuery('#jtip').offset().left)+'px;'+'width:'+(tip[0].offsetWidth-2)+'px;'+'height:'+(tip[0].offsetHeight-2)+'px;'+'"></iframe>');bgiframe.appendTo(document.body)}},function(){if(jQuery(this).attr('tip')&&jQuery(this).attr('tip')!=""){jQuery.data(this,'cancel.jtip',false);var self=this;setTimeout(function(){if(jQuery.data(this,'cancel.jtip'))return;var tip=jQuery.data(self,'active.jtip');if(opts.fade){tip.stop().fadeOut(function(){jQuery(this).remove()})}else{tip.remove()};jQuery('iframe.bgiframe').remove()},2)}})}})(jQuery);



/* jquery.message */
(function(jQuery){this.layer={'width':200,'height':24,'top':0};this.title='1';this.sfuc=null;this.time=4000;this.anims={'type':'slide','speed':1000,'root':'/message/'};this.inits=function(title,text){if($("#PopTips").is("div")){return};var sBody='<div id="PopTips" style="z-index:100;width:90%;margin:0px auto;text-align:center;height:'+(this.layer.height+2)+'px;position:absolute;display:none; top:'+(this.layer.top)+'px;"><div id="tips_Content" style="margin:0px auto;font-size:12px;width:'+(this.layer.width)+'px;height:'+(this.layer.height)+'px;border:#000000 1px solid;color:#000000;background:#ffffcc;text-align:left;"><span style="background:url('+this.anims.root+this.title+'.gif) 1px no-repeat; text-indent:25px;float:left;height:16px;line-height:16px;padding-top:6px;">'+text+'</span><span id="PopTips_Close" style="float:right; padding-right:2px;width:16px;line-height:auto;color:red;font-size:12px;font-weight:bold;text-align:center;cursor:pointer;overflow:hidden;padding-top:6px;">×</span></div></div>';$(document.body).prepend(sBody)};this.show=function(title,text,time){if($("#PopTips").is("div")){return};if(title=='0'||!title)title=this.title;this.inits(title,text);if(time)this.time=time;switch(this.anims.type){case'slide':$("#PopTips").slideDown(this.anims.speed);break;case'fade':$("#PopTips").fadeIn(this.anims.speed);break;case'show':$("#PopTips").show(this.anims.speed);break;default:$("#PopTips").slideDown(this.anims.speed);break}$("#PopTips_Close").click(function(){setTimeout('this.close()',1)});this.rmtips(this.time)};this.lays=function(width,height,top){if($("#PopTips").is("div")){return};if(width!=0&&width)this.layer.width=width;if(height!=0&&height)this.layer.height=height;if(top!=0&&top)this.layer.top=top};this.anim=function(type,speed,root){if($("#PopTips").is("div")){return};if(type!=0&&type)this.anims.type=type;if(speed!=0&&speed){switch(speed){case'slow':this.anims.speed=1000;break;case'fast':this.anims.speed=200;break;case'normal':this.anims.speed=400;break;default:this.anims.speed=speed}};if(root){this.anims.root=root;}};this.rmtips=function(time){setTimeout('this.close()',time)};this.close=function(){if($("#PopTips").is("div")){switch(this.anims.type){case'slide':$("#PopTips").slideUp(this.anims.speed);break;case'fade':$("#PopTips").fadeOut(this.anims.speed);break;case'show':$("#PopTips").hide(this.anims.speed);break;default:$("#PopTips").slideUp(this.anims.speed);break};setTimeout('$("#PopTips").remove();',this.anims.speed);if(this.sfuc!=null)eval(this.sfuc);this.original()}};this.original=function(){this.layer={'width':200,'height':24,'top':0};this.title='1';this.sfuc=null;this.time=4000;this.anims={'type':'slide','speed':1000,'root':'/message/'}};this.doafter=function(_sFuc){this.sfuc=_sFuc};jQuery.message=this;return jQuery})(jQuery);



/* jquery.pikachoose */
(function($){var defaults={autoPlay:true,speed:5000,text:{play:"",stop:"",previous:"上一张",next:"下一张",loading:"Loading"},transition:[1],showCaption:true,IESafe:false,showTooltips:false,carousel:false,carouselVertical:false,animationFinished:null,buildFinished:null,bindsFinished:null,startOn:0,thumbOpacity:0.4,hoverPause:false,animationSpeed:600,fadeThumbsIn:false,carouselOptions:{},thumbChangeEvent:'click.pikachoose',stopOnClick:false};$.fn.PikaChoose=function(o){return this.each(function(){$(this).data('pikachoose',new $pc(this,o))})};$.PikaChoose=function(e,o){this.options=$.extend({},defaults,o||{});this.list=null;this.image=null;this.anchor=null;this.caption=null;this.imgNav=null;this.imgPlay=null;this.imgPrev=null;this.imgNext=null;this.textNext=null;this.textPrev=null;this.previous=null;this.next=null;this.aniWrap=null;this.aniDiv=null;this.aniImg=null;this.thumbs=null;this.transition=null;this.active=null;this.tooltip=null;this.animating=false;this.stillOut=null;this.counter=null;this.timeOut=null;this.pikaStage=null;if(typeof(this.options.data)!="undefined"){e=$("<ul></ul>").addClass("jcarousel-skin-pika").appendTo(e);$.each(this.options.data,function(){if(typeof(this.link)!="undefined"){var tmp=$("<li><a href='"+this.link+"'><img></a></li>").appendTo(e);if(typeof(this.title)!="undefined"){tmp.find('a').attr('title',this.title)}}else{var tmp=$("<li><img></li>").appendTo(e)}if(typeof(this.caption)!="undefined"){tmp.append("<span>"+this.caption+"</span>")}if(typeof(this.thumbnail)!="undefined"){tmp.find('img').attr('ref',this.image);tmp.find('img').attr('src',this.thumbnail)}else{tmp.find('img').attr('src',this.image)}})}if(e instanceof jQuery||e.nodeName.toUpperCase()=='UL'||e.nodeName.toUpperCase()=='OL'){this.list=$(e);this.build();this.bindEvents()}else{return}var y=0;var x=0;for(var t=0;t<25;t++){var a='<div col="'+y+'" row="'+x+'"></div>';this.aniDiv.append(a);y++;if(y==5){x++;y=0}}};var $pc=$.PikaChoose;$pc.fn=$pc.prototype={pikachoose:'4.4.8'};$.fn.pikachoose=$.fn.PikaChoose;$pc.fn.extend=$pc.extend=$.extend;$pc.fn.extend({build:function(){this.step=0;if(this.options.pikaStage){this.wrap=this.options.pikaStage;this.wrap.addClass('pika-stage')}else{this.wrap=$("<div class='pika-stage'></div>").insertBefore(this.list)}this.image=$("<img>").appendTo(this.wrap);this.imgNav=$("<div class='pika-imgnav'></div>").insertAfter(this.image);this.imgPlay=$("<a></a>").appendTo(this.imgNav);this.counter=$("<span class='pika-counter'></span>").appendTo(this.imgNav);if(this.options.autoPlay){this.imgPlay.addClass('pause')}else{this.imgPlay.addClass('play')}this.imgPrev=$("<a class='previous'></a>").insertAfter(this.imgPlay);this.imgNext=$("<a class='next'></a>").insertAfter(this.imgPrev);this.caption=$("<div class='caption'></div>").insertAfter(this.imgNav).hide();this.tooltip=$("<div class='pika-tooltip'></div>").insertAfter(this.list).hide();this.aniWrap=$("<div class='pika-aniwrap'></div>").insertAfter(this.caption);this.aniImg=$("<img>").appendTo(this.aniWrap).hide();this.aniDiv=$("<div class='pika-ani'></div>").appendTo(this.aniWrap);this.textNav=$("<div class='pika-textnav'></div>").insertAfter(this.aniWrap);this.textPrev=$("<a class='previous'>"+this.options.text.previous+"</a>").appendTo(this.textNav);this.textNext=$("<a class='next'>"+this.options.text.next+"</a>").appendTo(this.textNav);this.list.addClass('pika-thumbs');this.thumbs=this.list.find('img');this.loader=$("<div class='pika-loader'></div>").appendTo(this.wrap).hide().html(this.options.text.loading);this.active=this.thumbs.eq(this.options.startOn);this.finishAnimating({'index':this.options.startOn,'source':this.active.attr('ref')||this.active.attr('src'),'caption':this.active.parents('li:first').find('span:first').html(),'clickThrough':this.active.parent().attr('href')||"",'clickThroughTarget':this.active.parent().attr('target')||"",'clickThroughTitle':this.active.parent().attr('title')||""});this.aniDiv.css({position:'relative'});var self=this;this.updateThumbs();if(this.options.fadeThumbsIn){this.list.fadeIn()}if(this.options.carousel){var carouselDefaults={vertical:this.options.carouselVertical,initCallback:function(carousel){jQuery(carousel.list).find('img').click(function(e,x){if(typeof(x)!=='undefined'&&x.how=="auto"){if(self.options.autoPlay==false){return false}}var clicked=parseInt(jQuery(this).parents('.jcarousel-item').attr('jcarouselindex'));var last=(jQuery(this).parents('ul').find('li:last').attr('jcarouselindex')==clicked-1)?true:false;if(!last){clicked=(clicked-2<=0)?0:clicked-2}clicked++;carousel.scroll(clicked)})}};var carouselOptions=$.extend({},carouselDefaults,this.options.carouselOptions||{});this.list.jcarousel(carouselOptions)}if(typeof(this.options.buildFinished)=='function'){this.options.buildFinished(this)}},createThumb:function(ele){var self=ele;var that=this;this.thumbs=this.list.find('img');if(typeof $.data(ele[0],'source')!=='undefined'){return};ele.parents('li:first').wrapInner("<div class='clip' />");self.hide();$.data(ele[0],'clickThrough',self.parent('a').attr('href')||"");$.data(ele[0],'clickThroughTarget',self.parent('a').attr('target')||"");$.data(ele[0],'clickThroughTitle',self.parent('a').attr('title')||"");if(self.parent('a').length>0){self.unwrap()}$.data(ele[0],'caption',self.next('span').html()||"");self.next('span').remove();$.data(ele[0],'source',self.attr('ref')||self.attr('src'));$.data(ele[0],'imageTitle',self.attr('title')||"");$.data(ele[0],'imageAlt',self.attr('alt')||"");$.data(ele[0],'index',this.thumbs.index(ele));$.data(ele[0],'order',self.closest('ul').find('li').index(self.parents('li')));var data=$.data(ele[0]);$('<img />').bind('load',{data:data},function(){if(typeof(that.options.buildThumbStart)=='function'){that.options.buildThumbStart(that)}var img=$(this);var w=this.width;var h=this.height;if(w===0){w=img.attr("width")}if(h===0){h=img.attr("height")}var ph=parseInt(self.parents('.clip').css('height').slice(0,-2));var pw=parseInt(self.parents('.clip').css('width').slice(0,-2));if(pw==0){pw=self.parents('li:first').outerWidth()}if(ph==0){ph=self.parents('li:first').outerHeight()}var rw=pw/w;var rh=ph/h;var ratio;if(rw<rh){self.css({height:'100%'})}else{self.css({width:'100%'})}self.hover(function(e){clearTimeout(that.stillOut);$(this).stop(true,true).fadeTo(250,1);if(!that.options.showTooltips){return}that.tooltip.show().stop(true,true).html(data.caption).animate({top:$(this).parent().position().top,left:$(this).parent().position().left,opacity:1.0},'fast')},function(e){if(!$(this).hasClass("active")){$(this).stop(true,true).fadeTo(250,that.options.thumbOpacity);that.stillOut=setTimeout(that.hideTooltip,700)}});if(data.order==that.options.startOn){self.fadeTo(250,1);self.addClass('active');self.parents('li').eq(0).addClass('active')}else{self.fadeTo(250,that.options.thumbOpacity)}if(typeof(that.options.buildThumbFinish)=='function'){that.options.buildThumbFinish(that)}}).attr('src',self.attr('src'))},bindEvents:function(){this.thumbs.bind(this.options.thumbChangeEvent,{self:this},this.imgClick);this.imgNext.bind('click.pikachoose',{self:this},this.nextClick);this.textNext.bind('click.pikachoose',{self:this},this.nextClick);this.imgPrev.bind('click.pikachoose',{self:this},this.prevClick);this.textPrev.bind('click.pikachoose',{self:this},this.prevClick);this.imgPlay.unbind('click.pikachoose').bind('click.pikachoose',{self:this},this.playClick);this.wrap.unbind('mouseenter.pikachoose').bind('mouseenter.pikachoose',{self:this},function(e){e.data.self.imgNav.stop(true,true).fadeTo('slow',1.0);if(e.data.self.options.hoverPause==true){clearTimeout(e.data.self.timeOut)}});this.wrap.unbind('mouseleave.pikachoose').bind('mouseleave.pikachoose',{self:this},function(e){e.data.self.imgNav.stop(true,true).fadeTo('slow',0.0);if(e.data.self.options.autoPlay==true&&e.data.self.options.hoverPause){e.data.self.timeOut=setTimeout((function(self){return function(){self.nextClick()}})(e.data.self),e.data.self.options.speed)}});this.tooltip.unbind('mouseenter.pikachoose').bind('mouseenter.pikachoose',{self:this},function(e){clearTimeout(e.data.self.stillOut)});this.tooltip.unbind('mouseleave.pikachoose').bind('mouseleave.pikachoose',{self:this},function(e){e.data.self.stillOut=setTimeout(e.data.self.hideTooltip,700)});if(typeof(this.options.bindsFinished)=='function'){this.options.bindsFinished(this)}},hideTooltip:function(e){$(".pika-tooltip").animate({opacity:0.01})},imgClick:function(e,x){var self=e.data.self;var data=$.data(this);if(self.animating){return}if(typeof(x)=='undefined'||x.how!="auto"){if(self.options.autoPlay&&self.options.stopOnClick){self.imgPlay.trigger('click')}else{clearTimeout(self.timeOut)}}else{if(self.options.autoPlay==false){return false}}if($(this).attr('src')!==$.data(this).source){self.loader.fadeIn('fast')}self.caption.fadeOut('slow');self.animating=true;self.active.fadeTo(300,self.options.thumbOpacity).removeClass('active');self.active.parents('.active').eq(0).removeClass('active');self.active=$(this);self.active.addClass('active').fadeTo(200,1);self.active.parents('li').eq(0).addClass('active');$('<img />').bind('load',{self:self,data:data},function(){self.loader.fadeOut('fast');self.aniDiv.css({height:self.image.height(),width:self.image.width()}).show();self.aniDiv.children('div').css({'width':'20%','height':'20%','float':'left'});var n=0;if(self.options.transition[0]==-1){n=Math.floor(Math.random()*7)+1}else{n=self.options.transition[self.step];self.step++;if(self.step>=self.options.transition.length){self.step=0}}if(self.options.IESafe&&$.browser.msie){n=1}self.doAnimation(n,data)}).attr('src',$.data(this).source)},doAnimation:function(n,data){this.aniWrap.css({position:'absolute',top:this.wrap.css('padding-top'),left:this.wrap.css('padding-left'),width:this.wrap.width()});var self=this;self.image.stop(true,false);self.caption.stop().fadeOut();var aWidth=self.aniDiv.children('div').eq(0).width();var aHeight=self.aniDiv.children('div').eq(0).height();var img=new Image();$(img).attr('src',data.source);if(img.height!=self.image.height()||img.width!=self.image.width()){if(n!=0&&n!=1&&n!=7){}}self.aniDiv.css({height:self.image.height(),width:self.image.width()});self.aniDiv.children().each(function(){var div=$(this);var xOffset=Math.floor(div.parent().width()/5)*div.attr('col');var yOffset=Math.floor(div.parent().height()/5)*div.attr('row');div.css({'background':'url('+data.source+') -'+xOffset+'px -'+yOffset+'px','background-size':div.parent().width()+'px '+div.parent().height()+'px','width':'0px','height':'0px','position':'absolute','top':yOffset+'px','left':xOffset+'px','float':'none'})});self.aniDiv.hide();self.aniImg.hide();switch(n){case 0:self.image.stop(true,true).fadeOut(self.options.animationSpeed,function(){self.image.attr('src',data.source).fadeIn(self.options.animationSpeed,function(){self.finishAnimating(data)})});break;case 1:self.aniDiv.hide();self.aniImg.height(self.image.height()).hide().attr('src',data.source);self.wrap.css({height:self.image.height()});$.when(self.image.fadeOut(self.options.animationSpeed),self.aniImg.eq(0).fadeIn(self.options.animationSpeed)).done(function(){self.finishAnimating(data)});break;case 2:self.aniDiv.show().children().hide().each(function(index){var delay=index*30;$(this).css({opacity:0.1}).show().delay(delay).animate({opacity:1,"width":aWidth,"height":aHeight},200,'linear',function(){if(self.aniDiv.find("div").index(this)==24){self.finishAnimating(data)}})});break;case 3:self.aniDiv.show().children("div:lt(5)").hide().each(function(index){var delay=$(this).attr('col')*100;$(this).css({opacity:0.1,"width":aWidth}).show().delay(delay).animate({opacity:1,"height":self.image.height()},self.options.animationSpeed,'linear',function(){if(self.aniDiv.find(" div").index(this)==4){self.finishAnimating(data)}})});break;case 4:self.aniDiv.show().children().hide().each(function(index){if(index>4){return}var delay=$(this).attr('col')*30;var gap=self.gapper($(this),aHeight,aWidth);var speed=self.options.animationSpeed*.7;$(this).css({opacity:0.1,"height":"100%"}).show().delay(delay).animate({opacity:1,"width":gap.width},speed,'linear',function(){if(self.aniDiv.find(" div").index(this)==4){self.finishAnimating(data)}})});break;case 5:self.aniDiv.show().children().show().each(function(index){var delay=index*Math.floor(Math.random()*5)*7;var gap=self.gapper($(this),aHeight,aWidth);if($(".animation div").index(this)==24){delay=700}$(this).css({"height":gap.height,"width":gap.width,"opacity":.01}).delay(delay).animate({"opacity":1},self.options.animationSpeed,function(){if(self.aniDiv.find(" div").index(this)==24){self.finishAnimating(data)}})});break;case 6:self.aniDiv.height(self.image.height()).hide().css({'background':'url('+data.source+') top left no-repeat'});self.aniDiv.children('div').hide();self.aniDiv.css({width:0}).show().animate({width:self.image.width()},self.options.animationSpeed,function(){self.finishAnimating(data);self.aniDiv.css({'background':'transparent'})});break;case 7:self.wrap.css({overflow:'hidden'});self.aniImg.height(self.image.height()).hide().attr('src',data.source);self.aniDiv.hide();self.image.css({position:'relative'}).animate({left:"-"+self.wrap.outerWidth()+"px"});self.aniImg.show();self.aniWrap.css({left:self.wrap.outerWidth()}).show().animate({left:"0px"},self.options.animationSpeed,function(){self.finishAnimating(data)});break}},finishAnimating:function(data){this.animating=false;this.image.attr('src',data.source);this.image.attr('alt',data.imageAlt);this.image.attr('title',data.imageTitle);this.image.css({left:"0"});this.image.show();var self=this;$('<img />').bind('load',function(){self.aniImg.fadeOut('fast');self.aniDiv.fadeOut('fast')}).attr('src',data.source);var cur=data.index+1;var total=this.thumbs.length;this.counter.html(cur+"/"+total);if(data.clickThrough!=""){if(this.anchor==null){this.anchor=this.image.wrap("<a>").parent()}this.anchor.attr('href',data.clickThrough);this.anchor.attr('title',data.clickThroughTitle);this.anchor.attr('target',data.clickThroughTarget)}else{if(this.image.parent('a').length>0){this.image.unwrap()}this.anchor=null}if(this.options.showCaption&&data.caption!=""&&data.caption!=null){this.caption.html(data.caption).fadeTo('slow',1)}if(this.options.autoPlay==true){var self=this;this.timeOut=setTimeout((function(self){return function(){self.nextClick()}})(this),this.options.speed,this.timeOut)}if(typeof(this.options.animationFinished)=='function'){this.options.animationFinished(this)}},gapper:function(ele,aHeight,aWidth){var gap;if(ele.attr('row')==4){gap=(this.aniDiv.height()-(aHeight*5))+aHeight;aHeight=gap}if(ele.attr('col')==4){gap=(this.aniDiv.width()-(aWidth*5))+aWidth;aWidth=gap}return{height:aHeight,width:aWidth}},nextClick:function(e){var how="natural";try{var self=e.data.self;if(typeof(e.data.self.options.next)=='function'){e.data.self.options.next(this)}}catch(err){var self=this;how="auto"}var next=self.active.parents('li:first').next().find('img');if(next.length==0){next=self.list.find('img').eq(0)};next.trigger('click',{how:how})},prevClick:function(e){if(typeof(e.data.self.options.previous)=='function'){e.data.self.options.previous(this)}var self=e.data.self;var prev=self.active.parents('li:first').prev().find('img');if(prev.length==0){prev=self.list.find('img:last')};prev.trigger('click')},playClick:function(e){var self=e.data.self;self.options.autoPlay=!self.options.autoPlay;self.imgPlay.toggleClass('play').toggleClass('pause');if(self.options.autoPlay){self.nextClick()}},Next:function(){var e={data:{self:this}};this.nextClick(e)},Prev:function(){var e={data:{self:this}};this.prevClick(e)},Play:function(){if(this.options.autoPlay){return}var e={data:{self:this}};this.playClick(e)},Pause:function(){if(!this.options.autoPlay){return}var e={data:{self:this}};this.playClick(e)},updateThumbs:function(){var self=this;this.thumbs=this.list.find('img');this.thumbs.each(function(){self.createThumb($(this),self)})}})})(jQuery);



(function($) { 
	$.fn.jFloat = function(o) {
		o = $.extend({
			top:60,  //广告距页面顶部距离
			left:0,//广告左侧距离
			right:0,//广告右侧距离
			width:100,  //广告容器的宽度
			height:360, //广告容器的高度
			minScreenW:800,//出现广告的最小屏幕宽度，当屏幕分辨率小于此，将不出现对联广告
			position:"left"
		}, o || {});
		var h=o.height;
		var fDiv=$(this);
		if(o.minScreenW>=$(window).width()){
			fDiv.hide();
			showAd=false;
		}
		else{
			fDiv.css("display","block");
			switch(o.position){
			case "left":
				fDiv.css({position:"absolute",left:o.left+"px",top:o.top+"px",width:o.width+"px",height:h+"px",overflow:"hidden"});
				break;
			case "right":
				fDiv.css({position:"absolute",left:"auto",right:o.right+"px",top:o.top+"px",width:o.width+"px",height:h+"px",overflow:"hidden"});
				break;
			};
		};
		function ylFloat(){
			var windowTop=$(window).scrollTop();
			if(fDiv.css("display")!="none")
				fDiv.css("top",o.top+windowTop+"px");
		};

		$(window).scroll(ylFloat);
		$(document).ready(ylFloat);     
       
	}; 
})(jQuery);



/* jTemplates 0.8.2 (http://jtemplates.tpython.com) Copyright (c) 2007-2012 Tomasz Gloc */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('7(3s.a&&!3s.a.3t){(9(a){6 h=9(s,G,j){5.1Y=[];5.1B={};5.2M=q;5.1Z={};5.1f={};5.j=a.1g({20:19,3u:1C,2N:19,2O:19,3v:1C,3w:1C},j);5.1D=(5.j.1D!==y)?(5.j.1D):(R.2i);5.10=(5.j.10!==y)?(5.j.10):(R.3x);5.2j=(5.j.2j!==y)?(5.j.2j):((5.j.20)?(a.2P):(R.2P));7(s==q){b}5.3y(s,G);7(s){5.1E(5.1f[\'2k\'],G,5.j)}5.1f=q};h.4g=\'0.8.2\';h.I=19;h.3z=4h;h.1v=0;h.z.3y=9(s,G){6 2Q=/\\{#1a *(\\w+) *(.*?) *\\}/g;6 2l,1F,U;6 1G=q;6 2R=[];21((2l=2Q.4i(s))!=q){1G=2Q.1G;1F=2l[1];U=s.22(\'{#/1a \'+1F+\'}\',1G);7(U==-1){C m V(\'12: h "\'+1F+\'" 2S 2m 4j.\');}5.1f[1F]=s.23(1G,U);2R[1F]=R.2T(2l[2])}7(1G===q){5.1f[\'2k\']=s;b}N(6 i 2n 5.1f){7(i!=\'2k\'){5.1Z[i]=m h()}}N(6 i 2n 5.1f){7(i!=\'2k\'){5.1Z[i].1E(5.1f[i],a.1g({},G||{},5.1Z||{}),a.1g({},5.j,2R[i]));5.1f[i]=q}}};h.z.1E=9(s,G,j){7(s==y){5.1Y.E(m 1o(\'\',1,5));b}s=s.13(/[\\n\\r]/g,\'\');s=s.13(/\\{\\*.*?\\*\\}/g,\'\');5.2M=a.1g({},5.1Z||{},G||{});5.j=m 2o(j);6 u=5.1Y;6 24=s.1h(/\\{#.*?\\}/g);6 1b=0,U=0;6 e;6 1p=0;6 2p=0;N(6 i=0,l=(24)?(24.X):(0);i<l;++i){6 14=24[i];7(1p){U=s.22(\'{#/1H}\');7(U==-1){C m V("12: 4k 25 3A 1H.");}7(U>1b){u.E(m 1o(s.23(1b,U),1,5))}1b=U+11;1p=0;i=a.4l(\'{#/1H}\',24);26}U=s.22(14,1b);7(U>1b){u.E(m 1o(s.23(1b,U),1p,5))}6 4m=14.1h(/\\{#([\\w\\/]+).*?\\}/);6 2q=J.$1;2U(2q){A\'4n\':++2p;u.2r();A\'7\':e=m 1I(14,u,5);u.E(e);u=e;F;A\'K\':u.2r();F;A\'/7\':21(2p){u=u.2s();--2p}A\'/N\':A\'/2V\':u=u.2s();F;A\'2V\':e=m 1w(14,u,5);u.E(e);u=e;F;A\'N\':e=3B(14,u,5);u.E(e);u=e;F;A\'26\':A\'F\':u.E(m 15(2q));F;A\'2W\':u.E(m 2X(14,5.2M,5));F;A\'c\':u.E(m 2Y(14,5));F;A\'6\':u.E(m 2Z(14,5));F;A\'30\':u.E(m 31(14));F;A\'4o\':u.E(m 1o(\'{\',1,5));F;A\'4p\':u.E(m 1o(\'}\',1,5));F;A\'1H\':1p=1;F;A\'/1H\':7(h.I){C m V("12: 4q 32 3A 1H.");}F;33:7(h.I){C m V(\'12: 4r 4s: \'+2q+\'.\');}}1b=U+14.X}7(s.X>1b){u.E(m 1o(s.3C(1b),1p,5))}};h.z.L=9(d,c,p,H){++H;7(H==1&&p!=y){a.34(p,"2t")}6 $T=d,$P;7(5.j.3v){$T=5.1D(d,{2u:(5.j.3u&&H==1),27:5.j.20},5.10)}7(!5.j.3w){$P=a.1g({},5.1B,c)}K{$P=a.1g({},5.1D(5.1B,{2u:(5.j.2N),27:19},5.10),5.1D(c,{2u:(5.j.2N&&H==1),27:19},5.10))}6 1c=\'\';N(6 i=0,l=5.1Y.X;i<l;++i){1c+=5.1Y[i].L($T,$P,p,H)}5.2v=q;--H;b 1c};h.z.Y=9(){7(5.2v==q)5.2v=m 2w(5);b 5.2v};h.z.35=9(28,1x){5.1B[28]=1x};R=9(){};R.3x=9(3D){b 3D.13(/&/g,\'&4t;\').13(/>/g,\'&3E;\').13(/</g,\'&3F;\').13(/"/g,\'&4u;\').13(/\'/g,\'&#39;\')};R.2i=9(d,1J,10){7(d==q){b d}2U(d.36){A 2o:6 o={};N(6 i 2n d){o[i]=R.2i(d[i],1J,10)}7(!1J.27){7(d.4v("37"))o.37=d.37}b o;A 4w:6 o=[];N(6 i=0,l=d.X;i<l;++i){o[i]=R.2i(d[i],1J,10)}b o;A 38:b(1J.2u)?(10(d)):(d);A 3G:7(1J.27){7(h.I)C m V("12: 4x 4y 2m 4z.");K b y}33:b d}};R.2T=9(2x){7(2x===q||2x===y){b{}}6 o=2x.4A(/[= ]/);7(o[0]===\'\'){o.4B()}6 29={};N(6 i=0,l=o.X;i<l;i+=2){29[o[i]]=o[i+1]}b 29};R.2P=9(D){7(1K D!=="4C"||!D){b q}1i{b(m 3G("b "+a.3H(D)))()}1j(e){7(h.I){C m V("12: 4D 4E");}b{}}};R.3I=9(2a,1v,3a){21(2a!=q){6 d=a.D(2a,\'2t\');7(d!=y&&d.1v==1v&&d.d[3a]!=y){b d.d[3a]}2a=2a.2y}b q};6 1o=9(3b,1p,1a){5.2b=3b;5.3J=1p;5.O=1a};1o.z.L=9(d,c,p,H){7(5.3J){b 5.2b}6 s=5.2b;6 16="";6 i=-1;6 2c=0;6 2d=-1;6 1L=0;21(1C){6 1M=s.22("{",i+1);6 1N=s.22("}",i+1);7(1M<0&&1N<0){F}7((1M!=-1&&1M<1N)||(1N==-1)){i=1M;7(++2c==1){2d=1M;16+=s.23(1L,i);1L=-1}}K{i=1N;7(--2c===0){7(2d>=0){16+=5.O.Y().3K(d,c,p,s.23(2d,1N+1));2d=-1;1L=i+1}}K 7(2c<0){2c=0}}}7(1L>-1){16+=s.3C(1L)}b 16};2w=9(t){5.3c=t};2w.z.3K=9($T,$P,$Q,2z){1i{6 16=3d(2z);7(a.4F(16)){7(5.3c.j.20||!5.3c.j.2O){b\'\'}16=16($T,$P,$Q)}b(16===y)?(""):(38(16))}1j(e){7(h.I){7(e 1y 15){e.1k="4G"}C e;}b""}};2w.z.17=9($T,$P,$Q,2z){b 3d(2z)};6 1I=9(M,1O,1q){5.2A=1O;M.1h(/\\{#(?:K)*7 (.*?)\\}/);5.3L=J.$1;5.1z=[];5.1A=[];5.1P=5.1z;5.1Q=1q};1I.z.E=9(e){5.1P.E(e)};1I.z.2s=9(){b 5.2A};1I.z.2r=9(){5.1P=5.1A};1I.z.L=9(d,c,p,H){6 1c=\'\';1i{6 1R=(5.1Q.Y().17(d,c,p,5.3L))?(5.1z):(5.1A);N(6 i=0,l=1R.X;i<l;++i){1c+=1R[i].L(d,c,p,H)}}1j(e){7(h.I||(e 1y 15)){C e;}}b 1c};3B=9(M,1O,1a){7(M.1h(/\\{#N (\\w+?) *= *(\\S+?) +4H +(\\S+?) *(?:18=(\\S+?))*\\}/)){6 f=m 1w(q,1O,1a);f.B=J.$1;f.W={\'32\':(J.$2||0),\'25\':(J.$3||-1),\'18\':(J.$4||1),\'x\':\'$T\'};f.3e=(9(i){b i});b f}K{C m V(\'12: 4I 4J "3M": \'+M);}};6 1w=9(M,1O,1a){5.2A=1O;5.O=1a;7(M!=q){M.1h(/\\{#2V +(.+?) +3N +(\\w+?)( .+)*\\}/);5.3O=J.$1;5.B=J.$2;5.W=J.$3||q;5.W=R.2T(5.W)}5.1z=[];5.1A=[];5.1P=5.1z};1w.z.E=9(e){5.1P.E(e)};1w.z.2s=9(){b 5.2A};1w.z.2r=9(){5.1P=5.1A};1w.z.L=9(d,c,p,H){1i{6 1r=(5.3e===y)?(5.O.Y().17(d,c,p,5.3O)):(5.3e);7(1r===$){C m V("1S: 4K \'$\' 4L 4M 4N 3N 3P-9");}6 2e=[];6 1T=1K 1r;7(1T==\'3Q\'){6 1R=[];a.1l(1r,9(k,v){2e.E(k);1R.E(v)});1r=1R}6 x=(5.W.x!==y)?(5.O.Y().17(d,c,p,5.W.x)):((d!=q)?(d):({}));7(x==q){x={}}6 s=2f(5.O.Y().17(d,c,p,5.W.32)||0),e;6 18=2f(5.O.Y().17(d,c,p,5.W.18)||1);7(1T!=\'9\'){e=1r.X}K{7(5.W.25===y||5.W.25===q){e=2f.4O}K{e=2f(5.O.Y().17(d,c,p,5.W.25))+((18>0)?(1):(-1))}}6 1c=\'\';6 i,l;7(5.W.2g){6 3f=s+2f(5.O.Y().17(d,c,p,5.W.2g));e=(3f>e)?(e):(3f)}7((e>s&&18>0)||(e<s&&18<0)){6 1U=0;6 3R=(1T!=\'9\')?(4P.4Q((e-s)/18)):y;6 1s,1m;6 3g=0;N(;((18>0)?(s<e):(s>e));s+=18,++1U,++3g){7(h.I&&3g>h.3z){C m V("1S: 4R 3P 4S 4T 4U");}1s=2e[s];7(1T!=\'9\'){1m=1r[s]}K{1m=1r(s);7(1m===y||1m===q){F}}7((1K 1m==\'9\')&&(5.O.j.20||!5.O.j.2O)){26}7((1T==\'3Q\')&&(1s 2n 2o)&&(1m===2o[1s])){26}6 3S=x[5.B];x[5.B]=1m;x[5.B+\'$3T\']=s;x[5.B+\'$1U\']=1U;x[5.B+\'$3U\']=(1U==0);x[5.B+\'$3V\']=(s+18>=e);x[5.B+\'$3W\']=3R;x[5.B+\'$2e\']=(1s!==y&&1s.36==38)?(5.O.10(1s)):(1s);x[5.B+\'$1K\']=1K 1m;N(i=0,l=5.1z.X;i<l;++i){1i{1c+=5.1z[i].L(x,c,p,H)}1j(1V){7(1V 1y 15){2U(1V.1k){A\'26\':i=l;F;A\'F\':i=l;s=e;F;33:C 1V;}}K{C 1V;}}}1t x[5.B+\'$3T\'];1t x[5.B+\'$1U\'];1t x[5.B+\'$3U\'];1t x[5.B+\'$3V\'];1t x[5.B+\'$3W\'];1t x[5.B+\'$2e\'];1t x[5.B+\'$1K\'];1t x[5.B];x[5.B]=3S}}K{N(i=0,l=5.1A.X;i<l;++i){1c+=5.1A[i].L(d,c,p,H)}}b 1c}1j(e){7(h.I||(e 1y 15)){C e;}b""}};6 15=9(1k){5.1k=1k};15.z=V;15.z.L=9(d){C 5;};6 2X=9(M,G,1q){M.1h(/\\{#2W (.*?)(?: 4V=(.*?))?\\}/);5.O=G[J.$1];7(5.O==y){7(h.I)C m V(\'12: 4W 3M 2W: \'+J.$1);}5.3X=J.$2;5.3Y=1q};2X.z.L=9(d,c,p,H){1i{b 5.O.L(5.3Y.Y().17(d,c,p,5.3X),c,p,H)}1j(e){7(h.I||(e 1y 15)){C e;}}b\'\'};6 2Y=9(M,1q){M.1h(/\\{#c 28=(\\w*?) 1x=(.*?)\\}/);5.B=J.$1;5.2b=J.$2;5.1Q=1q};2Y.z.L=9(d,c,p,H){1i{c[5.B]=5.1Q.Y().17(d,c,p,5.2b)}1j(e){7(h.I||(e 1y 15)){C e;}c[5.B]=y}b\'\'};6 2Z=9(M,1q){M.1h(/\\{#6 (.*?)\\}/);5.3Z=J.$1;5.1Q=1q};2Z.z.L=9(d,c,p,H){1i{7(p==y){b""}6 29=5.1Q.Y().17(d,c,p,5.3Z);6 1W=a.D(p,"2t");7(1W==y){1W={1v:++h.1v,d:[]}}6 i=1W.d.E(29);a.D(p,"2t",1W);b"(R.3I(5,"+1W.1v+","+(i-1)+"))"}1j(e){7(h.I||(e 1y 15)){C e;}b\'\'}};6 31=9(M){M.1h(/\\{#30 4X=(.*?)\\}/);5.3h=3d(J.$1);5.3i=5.3h.X;7(5.3i<=0){C m V(\'12: 4Y 4Z N 30\');}5.3j=0;5.3k=-1};31.z.L=9(d,c,p,H){6 3l=a.D(p,\'2h\');7(3l!=5.3k){5.3k=3l;5.3j=0}6 i=5.3j++%5.3i;b 5.3h[i]};a.1d.1E=9(s,G,j){7(s.36===h){b a(5).1l(9(){a.D(5,\'1S\',s);a.D(5,\'2h\',0)})}K{b a(5).1l(9(){a.D(5,\'1S\',m h(s,G,j));a.D(5,\'2h\',0)})}};a.1d.50=9(1X,G,j){6 s=a.2B({1u:1X,2C:\'2D\',2E:19,1k:\'40\'}).41;b a(5).1E(s,G,j)};a.1d.51=9(3m,G,j){6 s=a(\'#\'+3m).3b();7(s==q){s=a(\'#\'+3m).42();s=s.13(/&3F;/g,"<").13(/&3E;/g,">")}s=a.3H(s);s=s.13(/^<\\!\\[52\\[([\\s\\S]*)\\]\\]>$/43,\'$1\');s=s.13(/^<\\!--([\\s\\S]*)-->$/43,\'$1\');b a(5).1E(s,G,j)};a.1d.53=9(){6 2g=0;a(5).1l(9(){7(a.2F(5)){++2g}});b 2g};a.1d.54=9(){a(5).44();b a(5).1l(9(){a.34(5,\'1S\')})};a.1d.35=9(28,1x){b a(5).1l(9(){6 t=a.2F(5);7(t===y){7(h.I)C m V(\'12: h 2S 2m 45.\');K b}t.35(28,1x)})};a.1d.3n=9(d,c,1n){b a(5).1l(9(){6 t=a.2F(5);7(t===y){7(h.I)C m V(\'12: h 2S 2m 45.\');K b}7(1n!=y&&1n.3o){d=t.2j(d)}a.D(5,\'2h\',a.D(5,\'2h\')+1);a(5).42(t.L(d,c,5,0))})};a.1d.55=9(1X,c,1n){6 Z=5;6 o=a.1g({2G:19},a.56);o=a.1g(o,1n);a.2B({1u:1X,1k:o.1k,D:o.D,46:o.46,2E:o.2E,2G:o.2G,47:o.47,2C:\'2D\',48:9(d){6 r=a(Z).3n(d,c,{3o:1C});7(o.2H){o.2H(r)}},57:o.58,59:o.5a});b 5};6 2I=9(1u,c,2J,2K,1e,1n){5.49=1u;5.1B=c;5.4a=2J;5.4b=2K;5.1e=1e;5.4c=q;5.3p=1n||{};6 Z=5;a(1e).1l(9(){a.D(5,\'3q\',Z)});5.3r()};2I.z.3r=9(){5.4d();7(5.1e.X==0){b}6 Z=5;a.2B({1u:5.49,2C:\'2D\',D:5.4b,2G:19,48:9(d){1i{6 r=a(Z.1e).3n(d,Z.1B,{3o:1C});7(Z.3p.2H){Z.3p.2H(r)}}1j(1V){}}});5.4c=5b(9(){Z.3r()},5.4a)};2I.z.4d=9(){5.1e=a.4e(5.1e,9(o){7(a.5c.5d){6 n=o.2y;21(n&&n!=5e){n=n.2y}b n!=q}K{b o.2y!=q}})};a.1d.5f=9(1u,c,2J,2K,1n){b m 2I(1u,c,2J,2K,5,1n)};a.1d.44=9(){b a(5).1l(9(){6 2L=a.D(5,\'3q\');7(2L==q){b}6 Z=5;2L.1e=a.4e(2L.1e,9(o){b o!=Z});a.34(5,\'3q\')})};a.1g({3t:9(s,G,j){b m h(s,G,j)},5g:9(1X,G,j){6 s=a.2B({1u:1X,2C:\'2D\',2E:19,1k:\'40\'}).41;b m h(s,G,j)},2F:9(p){b a.D(p,\'1S\')},5h:9(1a,D,4f){b 1a.L(D,4f,y,0)},5i:9(1x){h.I=1x}})})(a)};',62,329,'|||||this|var|if||function|jQuery|return|param|||||Template||settings|||new|||element|null||||node|||extData|undefined|prototype|case|_name|throw|data|push|break|includes|deep|DEBUG_MODE|RegExp|else|get|oper|for|_template|||TemplateUtils|||se|Error|_option|length|getBin|that|f_escapeString||jTemplates|replace|this_op|JTException|result|evaluate|step|false|template|ss|ret|fn|objs|_templates_code|extend|match|try|catch|type|each|cval|options|TextNode|literalMode|templ|fcount|ckey|delete|url|guid|opFOREACH|value|instanceof|_onTrue|_onFalse|_param|true|f_cloneData|setTemplate|tname|lastIndex|literal|opIF|filter|typeof|sExpr|lm|rm|par|_currentState|_templ|arr|jTemplate|mode|iteration|ex|refobj|url_|_tree|_templates|disallow_functions|while|indexOf|substring|op|end|continue|noFunc|name|obj|el|_value|nested|sText|key|Number|count|jTemplateSID|cloneData|f_parseJSON|MAIN|iter|not|in|Object|elseif_level|op_|switchToElse|getParent|jTemplatesRef|escapeData|EvalObj|EvalClass|optionText|parentNode|__value|_parent|ajax|dataType|text|async|getTemplate|cache|on_success|Updater|interval|args|updater|_includes|filter_params|runnable_functions|parseJSON|reg|_template_settings|is|optionToObject|switch|foreach|include|Include|UserParam|UserVariable|cycle|Cycle|begin|default|removeData|setParam|constructor|toString|String||id|val|__templ|eval|_runFunc|tmp|loopCounter|_values|_length|_index|_lastSessionID|sid|elementName|processTemplate|StrToJSON|_options|jTemplateUpdater|run|window|createTemplate|filter_data|clone_data|clone_params|escapeHTML|splitTemplates|FOREACH_LOOP_LIMIT|of|opFORFactory|substr|txt|gt|lt|Function|trim|ReturnRefValue|_literalMode|evaluateContent|_cond|find|as|_arg|loop|object|_total|prevValue|index|first|last|total|_root|_mainTempl|_id|GET|responseText|html|im|processTemplateStop|defined|dataFilter|timeout|success|_url|_interval|_args|timer|detectDeletedNodes|grep|parameter|version|10000|exec|closed|No|inArray|ppp|elseif|ldelim|rdelim|Missing|unknown|tag|amp|quot|hasOwnProperty|Array|Functions|are|allowed|split|shift|string|Invalid|JSON|isFunction|subtemplate|to|Operator|failed|Variable|cannot|be|used|MAX_VALUE|Math|ceil|Foreach|limit|was|exceed|root|Cannot|values|no|elements|setTemplateURL|setTemplateElement|CDATA|hasTemplate|removeTemplate|processTemplateURL|ajaxSettings|error|on_error|complete|on_complete|setTimeout|browser|msie|document|processTemplateStart|createTemplateURL|processTemplateToText|jTemplatesDebugMode'.split('|'),0,{}));



/* jquery.ajaxfileupload */
(function() {jQuery.extend({createUploadIframe:function(id,uri){var frameId='jUploadFrame'+id;if(window.ActiveXObject){var io=document.createElement('<iframe id="'+frameId+'" name="'+frameId+'" />');if(typeof uri=='boolean'){io.src='javascript:false'}else if(typeof uri=='string'){io.src=uri}}else{var io=document.createElement('iframe');io.id=frameId;io.name=frameId};io.style.position='absolute';io.style.top='-1000px';io.style.left='-1000px';document.body.appendChild(io);return io},createUploadForm:function(id,fileElementId){var formId='jUploadForm'+id;var fileId='jUploadFile'+id;var form=jQuery('<form  action="" method="POST" name="'+formId+'" id="'+formId+'" enctype="multipart/form-data"></form>');var oldElement=jQuery('#'+fileElementId);var newElement=jQuery(oldElement).clone();jQuery(oldElement).attr('id',fileId);jQuery(oldElement).before(newElement);jQuery(oldElement).appendTo(form);jQuery(form).css('position','absolute');jQuery(form).css('top','-1200px');jQuery(form).css('left','-1200px');jQuery(form).appendTo('body');return form},ajaxFileUpload:function(s){s=jQuery.extend({},jQuery.ajaxSettings,s);var id=new Date().getTime();var form=jQuery.createUploadForm(id,s.fileElementId);var io=jQuery.createUploadIframe(id,s.secureuri);var frameId='jUploadFrame'+id;var formId='jUploadForm'+id;if(s.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var requestDone=false;var xml={};if(s.global)jQuery.event.trigger("ajaxSend",[xml,s]);var uploadCallback=function(isTimeout){var io=document.getElementById(frameId);try{if(io.contentWindow){xml.responseText=io.contentWindow.document.body?io.contentWindow.document.body.innerHTML:null;xml.responseXML=io.contentWindow.document.XMLDocument?io.contentWindow.document.XMLDocument:io.contentWindow.document}else if(io.contentDocument){xml.responseText=io.contentDocument.document.body?io.contentDocument.document.body.innerHTML:null;xml.responseXML=io.contentDocument.document.XMLDocument?io.contentDocument.document.XMLDocument:io.contentDocument.document}}catch(e){jQuery.handleError(s,xml,null,e)}if(xml||isTimeout=="timeout"){requestDone=true;var status;try{status=isTimeout!="timeout"?"success":"error";if(status!="error"){var data=jQuery.uploadHttpData(xml,s.dataType);if(s.success)s.success(data,status);if(s.global)jQuery.event.trigger("ajaxSuccess",[xml,s])}else jQuery.handleError(s,xml,status)}catch(e){status="error";jQuery.handleError(s,xml,status,e)};if(s.global)jQuery.event.trigger("ajaxComplete",[xml,s]);if(s.global&&!--jQuery.active)jQuery.event.trigger("ajaxStop");if(s.complete)s.complete(xml,status);jQuery(io).unbind();setTimeout(function(){try{jQuery(io).remove();jQuery(form).remove()}catch(e){jQuery.handleError(s,xml,null,e)}},100);xml=null}};if(s.timeout>0){setTimeout(function(){if(!requestDone)uploadCallback("timeout")},s.timeout)}try{var form=jQuery('#'+formId);jQuery(form).attr('action',s.url);jQuery(form).attr('method','POST');jQuery(form).attr('target',frameId);if(form.encoding){form.encoding='multipart/form-data'}else{form.enctype='multipart/form-data'}jQuery(form).submit()}catch(e){jQuery.handleError(s,xml,null,e)};if(window.attachEvent){document.getElementById(frameId).attachEvent('onload',uploadCallback)}else{document.getElementById(frameId).addEventListener('load',uploadCallback,false)}return{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script")jQuery.globalEval(data);if(type=="json")eval("data = "+data);if(type=="html")jQuery("<div>").html(data).evalScripts();return data}});})(jQuery);



/* jquery.select */
(function(){jQuery.fn.getCount=function(){return jQuery(this).get(0).options.length};jQuery.fn.getSelectedIndex=function(){return jQuery(this).get(0).selectedIndex};jQuery.fn.getSelectedText=function(){if(this.getCount()==0){return"下拉框中无选项"}else{var index=this.getSelectedIndex();return jQuery(this).get(0).options[index].text}};jQuery.fn.getSelectedValue=function(){if(this.getCount()==0){return"下拉框中无选中值"}else{return jQuery(this).val()}};jQuery.fn.setSelectedValue=function(value){jQuery(this).get(0).value=value};jQuery.fn.setSelectedText=function(text){var isExist=false;var count=this.getCount();for(var i=0;i<count;i++){if(jQuery(this).get(0).options[i].text==text){jQuery(this).get(0).options[i].selected=true;isExist=true;break}}if(!isExist){alert("下拉框中不存在该项")}};jQuery.fn.setSelectedIndex=function(index){var count=this.getCount();if(index>=count||index<0){alert("选中项索引超出范围")}else{jQuery(this).get(0).selectedIndex=index}};jQuery.fn.isExistItem=function(value){var isExist=false;var count=this.getCount();for(var i=0;i<count;i++){if(jQuery(this).get(0).options[i].value==value){isExist=true;break}}return isExist};jQuery.fn.addOption=function(text,value){if(this.isExistItem(value)){alert("待添加项的值已存在")}else{jQuery(this).get(0).options.add(new Option(text,value))}};jQuery.fn.removeItem=function(value){if(this.isExistItem(value)){var count=this.getCount();for(var i=0;i<count;i++){if(jQuery(this).get(0).options[i].value==value){jQuery(this).get(0).remove(i);break}}}else{alert("待删除的项不存在!")}};jQuery.fn.removeIndex=function(index){var count=this.getCount();if(index>=count||index<0){alert("待删除项索引超出范围")}else{jQuery(this).get(0).remove(index)}};jQuery.fn.removeSelected=function(){var index=this.getSelectedIndex();this.removeIndex(index)};jQuery.fn.clearAll=function(){jQuery(this).get(0).options.length=0}})(jQuery);



/* jquery.hoverIntent */
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);

(function ($) {
    $.fn.extend({
        setTime: function () {
            var $this = $(this);
            var time = "00:00", timeHH = "00", timemm = "00";

            $this.focus(function () {
                time = $this.val();
                var timeArr = time.split(":");

                if (timeArr.length == 2) {
                    timeHH = timeArr[0];
                    timemm = timeArr[1];
                }
                $("div").detach("#settime");
                $("body").append(createDiv());
                $("#settime").css({
                    "padding": "3px",
                    "position": "absolute",
                    "background-color": "#E3E3E3",
                    "font-size": "12px",
                    "border": "1px solid #777777",
                    "width": "140px",
                    "top": $this.offset().top + 22,
                    "left": $this.offset().left
                });

                $("input#time_submit").click(submit);
            })

            var submit = function () {
                $this.val($("select[name='hour']").val() + ":" + $("select[name='minute']").val());
				$this.change();
                $("div").detach("#settime");
            };

            var createDiv = function () {
                var str = "<div id='settime'><select name='hour'>";
                for (h = 0; h <= 9; h++) {
                    str += "<option value='0" + h + "'";
                    if ("0" + h == timeHH) str += " selected='selected'";
                    str += ">0" + h + "</option>";
                }
                for (h = 10; h <= 23; h++) {
                    str += "<option value='" + h + "'";
                    if (h == timeHH) str += " selected='selected'";
                    str += ">" + h + "</option>";
                }
                str += "</select>时 <select name='minute'>";
                for (h = 0; h <= 9; h += 5) {
                    str += "<option value='0" + h + "'";
                    if ("0" + h == timemm) str += " selected='selected'";
                    str += ">0" + h + "</option>";
                }
                for (h = 10; h <= 59; h += 5) {
                    str += "<option value='" + h + "'";
                    if (h == timemm) str += " selected='selected'";
                    str += ">" + h + "</option>";
                }
                str += "</select>分 <input id='time_submit' type='button' value='确定' style='font-size:12px' mce_style='font-size:12px'/></div>";
                return str;
            };

        }
    })
})(jQuery);


/* jquery.formValidator */
var regexEnum = 
{
    intege: "^-?[1-9]\\d*$",//整数
    intege1: "^[1-9]\\d*$",//正整数
    intege2: "^-[1-9]\\d*$",//负整数
    num: "^([+-]?)\\d*\\.?\\d+$",//数字
    num1: "^([+]?)\\d*\\.?\\d+$",//正数
    num2: "^-\\d*\\.?\\d+$",//负数
    decmal: "^([+-]?)\\d*\\.\\d+$",//浮点数
    decmal1: "^([+]?)\\d*\\.\\d+$",//正浮点数
    decmal2: "^-\\d*\\.\\d+$",//负浮点数
    money: "^[1-9][0-9]*(\\.[0-9]{1,2})?$",//货币
    email: "^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$", //邮件
    emailgroup: "^(\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+,)*\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$", //邮件群
    color: "^[a-fA-F0-9]{6}$",//颜色
    url: "^http[s]?:\\/\\/([\\w-]+\\.)+[\\w-]+([\\w-./?%&=]*)?$",//url
    domain: "^http[s]?:\\/\\/([\\w-]+\\.)+[\\w-]+(:[1-9][0-9]*)?$",//domain
    chinese: "^[\\u4E00-\\u9FA5\\uF900-\\uFA2D]+$",//仅中文
    ascii: "^[\\x00-\\xFF]+$",//仅ACSII字符
    zipcode: "^\\d{6}$",//邮编
    mobile: "^(13|15|18)[0-9]{9}$",//手机
    ip4: "^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5]).(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5]).(d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5]).(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$",//ip地址
    notempty: "^\\S+$",//非空
    picture: "(.*)\\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$",//图片
    rar: "(.*)\\.(rar|zip|7zip|tgz)$",//压缩文件
    date: "^\\d{4}(\\-|\\/|\.)\\d{1,2}\\1\\d{1,2}$",//日期
    datetime: "^\\d{4}(\\-)(\\d{2})\\1\\d{2} \\d{2}:\\d{2}:\\d{2}$",//长日期
    qq: "^[1-9]*[1-9][0-9]*$",//QQ号码
    tel: "(\\d{3}-|\\d{4}-)?(\\d{8}|\\d{7})",//国内电话
    username: "^[A-Za-z\\u4E00-\\u9FA5\\uF900-\\uFA2D]+[A-Za-z0-9\\u4E00-\\u9FA5\\uF900-\\uFA2D\\-\\_]*$",//可以是中文、英文、数字、-、_
    letter: "^[A-Za-z]+$",//字母
    letter_u: "^[A-Z]+$",//大写字母
    letter_l: "^[a-z]+$",//小写字母
    idcard: "^[1-9]([0-9]{13}|[0-9]{16})[0-9a-zA-Z]$"//身份证
}

var aCity = { 11: "北京", 12: "天津", 13: "河北", 14: "山西", 15: "内蒙古", 21: "辽宁", 22: "吉林", 23: "黑龙江", 31: "上海", 32: "江苏", 33: "浙江", 34: "安徽", 35: "福建", 36: "江西", 37: "山东", 41: "河南", 42: "湖北", 43: "湖南", 44: "广东", 45: "广西", 46: "海南", 50: "重庆", 51: "四川", 52: "贵州", 53: "云南", 54: "西藏", 61: "陕西", 62: "甘肃", 63: "青海", 64: "宁夏", 65: "新疆", 71: "台湾", 81: "香港", 82: "澳门", 91: "国外" }

function isCardID(sId) {
    var iSum = 0;
    var info = "";
    if (!/^\d{17}(\d|x)$/i.test(sId)) return "你输入的身份证长度或格式错误";
    sId = sId.replace(/x$/i, "a");
    if (aCity[parseInt(sId.substr(0, 2))] == null) return "你的身份证地区非法";
    sBirthday = sId.substr(6, 4) + "-" + Number(sId.substr(10, 2)) + "-" + Number(sId.substr(12, 2));
    var d = new Date(sBirthday.replace(/-/g, "/"));
    if (sBirthday != (d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate())) return "身份证上的出生日期非法";
    for (var i = 17; i >= 0; i--) iSum += (Math.pow(2, i) % 11) * parseInt(sId.charAt(17 - i), 11);
    if (iSum % 11 != 1) return "你输入的身份证号非法";
    return true;//aCity[parseInt(sId.substr(0,2))]+","+sBirthday+","+(sId.substr(16,1)%2?"男":"女") 
}

var jQuery_formValidator_initConfig;
(function () { jQuery.formValidator = { sustainType: function (id, setting) { var elem = jQuery("#" + id).get(0); var srcTag = elem.tagName; var stype = elem.type; switch (setting.validateType) { case "InitValidator": return true; case "InputValidator": if (srcTag == "INPUT" || srcTag == "TEXTAREA" || srcTag == "SELECT") { return true } else { return false } case "CompareValidator": if (srcTag == "INPUT" || srcTag == "TEXTAREA") { if (stype == "checkbox" || stype == "radio") { return false } else { return true } } return false; case "AjaxValidator": if (stype == "text" || stype == "textarea" || stype == "file" || stype == "select-one") { return true } else { return false } case "RegexValidator": if (srcTag == "INPUT" || srcTag == "TEXTAREA") { if (stype == "checkbox" || stype == "radio") { return false } else { return true } } return false; case "FunctionValidator": return true } }, initConfig: function (controlOptions) { var settings = { validatorGroup: "1", alertMessage: false, onSuccess: function () { return true }, onError: function () { }, submitOnce: false }; controlOptions = controlOptions || {}; jQuery.extend(settings, controlOptions); if (jQuery_formValidator_initConfig == null) { jQuery_formValidator_initConfig = new Array() } jQuery_formValidator_initConfig.push(settings) }, appendValid: function (id, setting) { if (!$.formValidator.sustainType(id, setting)) return -1; var srcjo = jQuery("#" + id).get(0); if (setting.validateType == "InitValidator" || !srcjo.settings || srcjo.settings == undefined) { srcjo.settings = new Array() } var len = srcjo.settings.push(setting); srcjo.settings[len - 1].index = len - 1; return len - 1 }, getInitConfig: function (validatorGroup) { if (jQuery_formValidator_initConfig != null) { for (i = 0; i < jQuery_formValidator_initConfig.length; i++) { if (validatorGroup == jQuery_formValidator_initConfig[i].validatorGroup) { return jQuery_formValidator_initConfig[i] } } } return null }, triggerValidate: function (returnObj) { switch (returnObj.setting.validateType) { case "InputValidator": $.formValidator.InputValid(returnObj); break; case "CompareValidator": $.formValidator.CompareValid(returnObj); break; case "AjaxValidator": $.formValidator.AjaxValid(returnObj); break; case "RegexValidator": $.formValidator.RegexValid(returnObj); break; case "FunctionValidator": $.formValidator.FunctionValid(returnObj); break } }, SetTipState: function (tipid, showclass, showmsg) { var tip = jQuery("#" + tipid); tip.removeClass(); tip.addClass(showclass); tip.html(showmsg); tip.attr("title", showmsg) }, SetFailState: function (tipid, showmsg) { var tip = jQuery("#" + tipid); tip.removeClass(); tip.addClass("onError"); tip.html(showmsg); tip.attr("title", showmsg); alert(tip.width()) }, ShowMessage: function (returnObj) { var id = returnObj.id; var isValid = returnObj.isValid; var setting = returnObj.setting; var showmsg = ""; var showclass = "onNormal"; var settings = jQuery("#" + id).get(0).settings; if (!isValid) { if (setting.validateType == "AjaxValidator") { if (setting.lastValid == "") { showclass = "onLoad"; showmsg = setting.onwait } else { showclass = "onError"; showmsg = setting.onerror } } else { showmsg = (returnObj.errormsg == "" ? setting.onerror : returnObj.errormsg); showclass = "onError" } if ($.formValidator.getInitConfig(settings[0].validatorGroup).alertMessage) { var elem = jQuery("#" + id).get(0); if (elem.validoldvalue != jQuery(elem).val()) alert(showmsg) } else { $.formValidator.SetTipState(settings[0].tipid, showclass, showmsg) } } else { if (!$.formValidator.getInitConfig(setting.validatorGroup).alertMessage) { var showmsg = ""; if ($.formValidator.IsEmpty(id)) { showmsg = setting.onempty } else { showmsg = (setting.oncorrect ? setting.oncorrect : '') } $.formValidator.SetTipState(setting.tipid, "onSuccess", showmsg) } } }, GetLength: function (id) { var srcjo = jQuery("#" + id); sType = srcjo.get(0).type; var len = 0; switch (sType) { case "text": case "hidden": case "password": case "textarea": case "file": var val = srcjo.val(); for (var i = 0; i < val.length; i++) { if (val.charCodeAt(i) >= 0x4e00 && val.charCodeAt(i) <= 0x9fa5) { len += 2 } else { len++ } } break; case "checkbox": case "radio": len = jQuery("input[@type='" + sType + "'][@name='" + srcjo.attr("name") + "'][@checked]").length; break; case "select-one": len = srcjo.get(0).options ? srcjo.get(0).options.selectedIndex : -1; break; case "select-more": break } return len }, IsEmpty: function (id) { if (jQuery("#" + id).get(0).settings[0].empty && $.formValidator.GetLength(id) == 0) { return true } else { return false } }, IsOneValid: function (id) { return OneIsValid(id, 1).isValid }, OneIsValid: function (id, index) { var returnObj = new Object(); returnObj.id = id; returnObj.ajax = -1; returnObj.errormsg = ""; var elem = jQuery("#" + id).get(0); var settings = elem.settings; var settingslen = settings.length; if ($.formValidator.IsEmpty(id)) { returnObj.setting = settings[0]; returnObj.isValid = true } else { for (var i = index; i < settingslen; i++) { returnObj.setting = settings[i]; if (settings[i].validateType != "AjaxValidator") { $.formValidator.triggerValidate(returnObj) } else { returnObj.ajax = i } if (!settings[i].isValid) { returnObj.isValid = false; returnObj.setting = settings[i]; break } else { returnObj.isValid = true; returnObj.setting = settings[0]; if (settings[i].validateType == "AjaxValidator") break } } } if (returnObj.isValid) { var lb_ret = returnObj.setting.onvalid(jQuery("#" + id).get(0), jQuery("#" + id).val()); if (lb_ret != undefined) { if (typeof lb_ret == "string") { returnObj.errormsg = lb_ret; returnObj.isValid = false } else { settings[settings.length - 1].isValid = lb_ret; returnObj.isValid = lb_ret } } } return returnObj }, PageIsValid: function (validatorGroup) { if (validatorGroup == null || validatorGroup == undefined) validatorGroup = "1"; var isValid = true; var thefirstid = ""; var returnObj, setting; var error_tip = "^"; jQuery("form").each(function (i, form1) { for (i = 0; i < form1.elements.length; i++) { elem = form1.elements[i]; if (elem.settings != undefined && elem.settings != null) { if (elem.settings[0].validatorGroup == validatorGroup) { if ($.formValidator.getInitConfig(validatorGroup).alertMessage) { if (isValid) { returnObj = $.formValidator.OneIsValid(elem.id, 1); if (!returnObj.isValid) { $.formValidator.ShowMessage(returnObj); isValid = false; if (thefirstid == "") { thefirstid = returnObj.id; setting = returnObj.setting } } } } else { returnObj = $.formValidator.OneIsValid(elem.id, 1); if (!returnObj.isValid) { isValid = false; if (thefirstid == "") { thefirstid = returnObj.id; setting = returnObj.setting } if (error_tip.indexOf("^" + elem.settings[0].tipid + "^") == -1) { error_tip = error_tip + elem.settings[0].tipid + "^"; $.formValidator.ShowMessage(returnObj) } } else { if (error_tip.indexOf("^" + elem.settings[0].tipid + "^") == -1) { $.formValidator.ShowMessage(returnObj) } } } } } } }); if (isValid) { isValid = $.formValidator.getInitConfig(validatorGroup).onSuccess(); if ($.formValidator.getInitConfig(validatorGroup).submitOnce) { jQuery("input[@type='submit']").attr("disabled", true) } } else { $.formValidator.getInitConfig(validatorGroup).onError(setting.onerror, jQuery("#" + thefirstid)); if (thefirstid != "") { jQuery("#" + thefirstid).focus() } } return isValid }, AjaxValid: function (returnObj) { var id = returnObj.id; var srcjo = jQuery("#" + id); var setting = srcjo.get(0).settings[returnObj.ajax]; var ls_url = setting.url; if (srcjo.size() == 0 && srcjo.get(0).settings[0].empty) { returnObj.setting = jQuery("#" + id).get(0).settings[0]; returnObj.isValid = true; $.formValidator.ShowMessage(returnObj); setting.isValid = true; return } if (setting.addidvalue) { var parm = id + "=" + escape(srcjo.val()); ls_url = ls_url + ((ls_url).indexOf("?") > 0 ? ("&" + parm) : ("?" + parm)) } jQuery.ajax({ mode: "abort", type: setting.type, url: ls_url, data: setting.data, async: setting.async, dataType: setting.datatype, success: function (data) { setting0 = srcjo.get(0).settings[0]; if (setting.success(data)) { $.formValidator.SetTipState(setting0.tipid, "onSuccess", (setting0.oncorrect ? setting0.oncorrect : '')); setting.isValid = true } else { $.formValidator.SetTipState(setting0.tipid, "onError", setting.onerror); setting.isValid = false } }, complete: function () { if (setting.buttons && setting.buttons.length > 0) setting.buttons.attr({ "disabled": false }); setting.complete }, beforeSend: function () { if (setting.buttons && setting.buttons.length > 0) setting.buttons.attr({ "disabled": true }); var isvalid = setting.beforesend(); if (isvalid) setting.isValid = false; setting.lastValid = "-1"; return setting.beforesend }, error: function () { setting0 = srcjo.get(0).settings[0]; $.formValidator.SetTipState(setting0.tipid, "onError", setting.onerror); setting.isValid = false; setting.error() }, processData: setting.processdata }) }, RegexValid: function (returnObj) { var id = returnObj.id; var setting = returnObj.setting; var srcTag = jQuery("#" + id).get(0).tagName; var elem = jQuery("#" + id).get(0); if (elem.settings[0].empty && elem.value == "") { setting.isValid = true } else { var regexpress = setting.regexp; if (setting.datatype == "enum") { regexpress = eval("regexEnum." + regexpress) } if (regexpress == undefined || regexpress == "") { setting.isValid = false; return } var exp = new RegExp(regexpress, setting.param); if (exp.test(jQuery("#" + id).val())) { setting.isValid = true } else { setting.isValid = false } } }, FunctionValid: function (returnObj) { var id = returnObj.id; var setting = returnObj.setting; var srcjo = jQuery("#" + id); var lb_ret = setting.fun(srcjo.val(), srcjo.get(0)); if (lb_ret != undefined) { if (typeof lb_ret == "string") { setting.isValid = false; returnObj.errormsg = lb_ret } else { setting.isValid = lb_ret } } }, InputValid: function (returnObj) { var id = returnObj.id; var setting = returnObj.setting; var srcjo = jQuery("#" + id); var elem = srcjo.get(0); var val = srcjo.val(); var sType = elem.type; var len = $.formValidator.GetLength(id); switch (sType) { case "text": case "hidden": case "password": case "textarea": case "file": case "checkbox": case "select-one": case "radio": if (sType == "select-one") { setting.type = "size" } if (setting.type == "size") { if (len < setting.min || len > setting.max) { setting.isValid = false } else { setting.isValid = true } } else { stype = (typeof setting.min); if (stype == "number") { if (!isNaN(val)) { nval = parseFloat(val); if (nval >= setting.min && nval <= setting.max) { setting.isValid = true } else { setting.isValid = false } } else setting.isValid = false } if (stype == "string") { if (val >= setting.min && val <= setting.max) { setting.isValid = true } else { setting.isValid = false } } } break; case "select-more": break } }, CompareValid: function (returnObj) { var id = returnObj.id; var setting = returnObj.setting; var srcjo = jQuery("#" + id); var desjo = jQuery("#" + setting.desID); setting.isValid = false; curvalue = srcjo.val(); ls_data = desjo.val(); if (setting.datatype == "number") { if (!isNaN(curvalue) && !isNaN(ls_data)) { curvalue = parseFloat(curvalue); ls_data = parseFloat(ls_data) } else { return } } switch (setting.operateor) { case "=": if (curvalue == ls_data) { setting.isValid = true } break; case "!=": if (curvalue != ls_data) { setting.isValid = true } break; case ">": if (curvalue > ls_data) { setting.isValid = true } break; case ">=": if (curvalue >= ls_data) { setting.isValid = true } break; case "<": if (curvalue < ls_data) { setting.isValid = true } break; case "<=": if (curvalue <= ls_data) { setting.isValid = true } break; case "oneok": if ($.formValidator.IsEmpty(id) || $.formValidator.IsEmpty(IsEmpty.desID)) { setting.isValid = false } else { setting.isValid = true } } } }; jQuery.fn.formValidator = function (msgOptions) { var setting = { validatorGroup: "1", empty: false, submitonce: false, automodify: false, entermovetonext: true, onshow: "", onfocus: "请输入内容", onempty: "输入内容为空", onvalid: function () { return true }, onfocusevent: function () { }, onblurevent: function () { }, tipid: this.get(0).id + "Tip", defaultvalue: null, validateType: "InitValidator" }; msgOptions = msgOptions || {}; jQuery.extend(setting, msgOptions); return this.each(function () { var triggerID = this.id; var tip = jQuery("#" + setting.tipid); $.formValidator.appendValid(triggerID, setting); if (!$.formValidator.getInitConfig(setting.validatorGroup).alertMessage) { $.formValidator.SetTipState(setting.tipid, "onShow", setting.onshow) } var srcTag = this.tagName; var defaultValue = setting.defaultvalue; if (srcTag == "INPUT" || srcTag == "TEXTAREA") { var stype = this.type; var joeach = jQuery(this); if (stype == "checkbox" || stype == "radio") { joeach = jQuery("input[@name=" + this.name + "]"); if (defaultValue) { checkobj = jQuery("input[@name=" + this.name + "][@value='" + defaultValue + "']"); if (checkobj.length == 1) checkobj.attr("checked", "true") } } else { if (defaultValue) joeach.val(setting.defaultvalue) } joeach.focus(function () { var settings = joeach.get(0).settings; if (!$.formValidator.getInitConfig(settings[0].validatorGroup).alertMessage) { $.formValidator.SetTipState(settings[0].tipid, "onFocus", settings[0].onfocus) } if (stype == "password" || stype == "text" || stype == "textarea" || stype == "file") { this.validoldvalue = jQuery(this).val() } settings[0].onfocusevent(joeach.get(0)) }); joeach.blur(function () { var elem = joeach.get(0); var thefirstsettings = elem.settings; var settingslen = thefirstsettings.length; var returnObj = $.formValidator.OneIsValid(triggerID, 1); if (returnObj.ajax >= 0 && elem.validoldvalue != jQuery(elem).val()) { $.formValidator.SetTipState(thefirstsettings[0].tipid, "onLoad", thefirstsettings[returnObj.ajax].onwait); $.formValidator.AjaxValid(returnObj) } else { $.formValidator.ShowMessage(returnObj); if (!returnObj.isValid) { var auto = thefirstsettings[0].automodify && (elem.type == "text" || elem.type == "textarea" || elem.type == "file"); if (auto && !$.formValidator.getInitConfig(thefirstsettings[0].validatorGroup).alertMessage) { alert(returnObj.setting.onerror); $.formValidator.SetTipState(thefirstsettings[0].tipid, "onShow", setting.onshow) } } } thefirstsettings[0].onblurevent(joeach.get(0)) }) } else if (srcTag == "SELECT") { srcjo = jQuery(this); var settings = this.settings; if (defaultValue) { jQuery.each(this.options, function () { if (this.value == defaultValue) this.selected = true }) } srcjo.focus(function () { if (!$.formValidator.getInitConfig(setting.validatorGroup).alertMessage) { $.formValidator.SetTipState(settings[0].tipid, "onFocus", settings[0].onfocus) } }); srcjo.bind("change", function () { var returnObj = $.formValidator.OneIsValid(triggerID, 1); if (returnObj.ajax >= 0 && this.validoldvalue != jQuery(this).val()) { $.formValidator.AjaxValid(triggerID, returnObj.setting) } else { $.formValidator.ShowMessage(returnObj) } }) } }) }; jQuery.fn.InputValidator = function (controlOptions) { var settings = { isValid: false, min: 0, max: 99999999999999, forceValid: false, type: "size", defaultValue: null, onerror: "输入错误", validateType: "InputValidator" }; controlOptions = controlOptions || {}; jQuery.extend(settings, controlOptions); return this.each(function () { $.formValidator.appendValid(this.id, settings) }) }; jQuery.fn.SelectValidator = function (controlOptions) { var settings = { isValid: false, onerror: "必须选择", defaultValue: null, validateType: "SelectValidator" }; controlOptions = controlOptions || {}; jQuery.extend(settings, controlOptions); return this.each(function () { $.formValidator.appendValid(this.id, settings) }) }; jQuery.fn.CompareValidator = function (controlOptions) { var settings = { isValid: false, desID: "", operateor: "=", onerror: "输入错误", validateType: "CompareValidator" }; controlOptions = controlOptions || {}; jQuery.extend(settings, controlOptions); return this.each(function () { var li_index = $.formValidator.appendValid(this.id, settings) }) }; jQuery.fn.RegexValidator = function (controlOptions) { var settings = { isValid: false, regexp: "", param: "i", datatype: "string", onerror: "输入的格式不正确", validateType: "RegexValidator" }; controlOptions = controlOptions || {}; jQuery.extend(settings, controlOptions); return this.each(function () { $.formValidator.appendValid(this.id, settings) }) }; jQuery.fn.FunctionValidator = function (controlOptions) { var settings = { isValid: true, onerror: "你输入的数据不正确，请确认", fun: function () { this.isValid = true }, validateType: "FunctionValidator" }; controlOptions = controlOptions || {}; jQuery.extend(settings, controlOptions); return this.each(function () { $.formValidator.appendValid(this.id, settings) }) }; jQuery.fn.AjaxValidator = function (controlOptions) { var settings = { isValid: false, lastValid: "", type: "GET", url: "", addidvalue: true, datatype: "html", data: "", async: true, beforesend: function () { return true }, success: function () { return true }, complete: function () { }, processdata: false, error: function () { }, buttons: null, onerror: "服务器校验没有通过", onwait: "正在等待服务器返回数据", validateType: "AjaxValidator" }; controlOptions = controlOptions || {}; jQuery.extend(settings, controlOptions); return this.each(function () { $.formValidator.appendValid(this.id, settings) }) }; jQuery.fn.DefaultPassed = function () { return this.each(function () { var settings = this.settings; for (var i = 1; i < settings.length; i++) { settings[i].isValid = true; $.formValidator.SetTipState(settings[0].tipid, "onSuccess", (settings[0].oncorrect ? settings[0].oncorrect : '')) } }) } })(jQuery);

