/*
 Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"bgcolor,textcolor",hidpi:!0,init:function(d){function r(a,f,c,e,h){var m=new CKEDITOR.style(k["colorButton_"+f+"Style"]),l=CKEDITOR.tools.getNextId()+"_colorBox";h=h||{};d.ui.add(a,CKEDITOR.UI_PANELBUTTON,
{label:c,title:c,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+e,allowedContent:m,requiredContent:m,contentTransformations:h.contentTransformations,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":g.panelTitle}},onBlock:function(n,b){b.autoSize=!0;b.element.addClass("cke_colorblock");b.element.setHtml(u(n,f,l));b.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var a=b.keys,c="rtl"==d.lang.dir;a[c?37:39]="next";a[40]=
"next";a[9]="next";a[c?39:37]="prev";a[38]="prev";a[CKEDITOR.SHIFT+9]="prev";a[32]="click"},refresh:function(){d.activeFilter.check(m)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var a=d.getSelection(),a=a&&a.getStartElement(),a=d.elementPath(a),b;if(a){a=a.block||a.blockLimit||d.document.getBody();do b=a&&a.getComputedStyle("back"==f?"background-color":"color")||"transparent";while("back"==f&&"transparent"==b&&a&&(a=a.getParent()));b&&"transparent"!=b||(b="#ffffff");!1!==k.colorButton_enableAutomatic&&
this._.panel._.iframe.getFrameDocument().getById(l).setStyle("background-color",b);return b}}})}function u(a,f,c){var e=[],h=k.colorButton_colors.split(","),m=d.plugins.colordialog&&!1!==k.colorButton_enableMore,l=h.length+(m?2:1),n=CKEDITOR.tools.addFunction(function(b,c){function e(a){this.removeListener("ok",e);this.removeListener("cancel",e);"ok"==a.name&&g(this.getContentElement("picker","selectedColor").getValue(),c)}var g=arguments.callee;if("?"==b)d.openDialog("colordialog",function(){this.on("ok",
e);this.on("cancel",e)});else{d.focus();a.hide();d.fire("saveSnapshot");d.removeStyle(new CKEDITOR.style(k["colorButton_"+c+"Style"],{color:"inherit"}));if(b){var f=k["colorButton_"+c+"Style"];f.childRule="back"==c?function(a){return t(a)}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||t(a)};d.applyStyle(new CKEDITOR.style(f,{color:b}))}d.fire("saveSnapshot")}});!1!==k.colorButton_enableAutomatic&&e.push('\x3ca class\x3d"cke_colorauto" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',
g.auto,'" onclick\x3d"CKEDITOR.tools.callFunction(',n,",null,'",f,"');return false;\" href\x3d\"javascript:void('",g.auto,'\')" role\x3d"option" aria-posinset\x3d"1" aria-setsize\x3d"',l,'"\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"cke_colorbox" id\x3d"',c,'"\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd colspan\x3d7 align\x3dcenter\x3e',g.auto,"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/a\x3e");e.push('\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e');
for(c=0;c<h.length;c++){0===c%8&&e.push("\x3c/tr\x3e\x3ctr\x3e");var b=h[c].split("/"),p=b[0],q=b[1]||p;b[1]||(p="#"+p.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));b=d.lang.colorbutton.colors[q]||q;e.push('\x3ctd\x3e\x3ca class\x3d"cke_colorbox" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',b,'" onclick\x3d"CKEDITOR.tools.callFunction(',n,",'",p,"','",f,"'); return false;\" href\x3d\"javascript:void('",b,'\')" role\x3d"option" aria-posinset\x3d"',c+2,'" aria-setsize\x3d"',l,'"\x3e\x3cspan class\x3d"cke_colorbox" style\x3d"background-color:#',
q,'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e')}m&&e.push('\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d8 align\x3dcenter\x3e\x3ca class\x3d"cke_colormore" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',g.more,'" onclick\x3d"CKEDITOR.tools.callFunction(',n,",'?','",f,"');return false;\" href\x3d\"javascript:void('",g.more,"')\"",' role\x3d"option" aria-posinset\x3d"',l,'" aria-setsize\x3d"',l,'"\x3e',g.more,"\x3c/a\x3e\x3c/td\x3e");e.push("\x3c/tr\x3e\x3c/table\x3e");return e.join("")}function t(a){return"false"==
a.getAttribute("contentEditable")||a.getAttribute("data-nostyle")}var k=d.config,g=d.lang.colorbutton;CKEDITOR.env.hc||(r("TextColor","fore",g.textColorTitle,10,{contentTransformations:[[{element:"font",check:"span{color}",left:function(a){return!!a.attributes.color},right:function(a){a.name="span";a.attributes.color&&(a.styles.color=a.attributes.color);delete a.attributes.color}}]]}),r("BGColor","back",g.bgColorTitle,20))}});CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";
CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};