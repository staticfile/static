$.fn.qser=function(){var a={},b=$(this).serializeArray();if(b.length!=0)for(var c=0;c<b.length;c++)a[b[c].name]=b[c].value;return a};$.fn.qdata=function(){var a={},b=$(this).attr("data");if(b){b=b.split(";");for(var c=0;c<b.length;c++)if(b[c]){var d=b[c].split(":");a[d[0]]=d[1]}}return a};var qiao={};qiao.ajaxoptions={url:"",data:{},type:"post",dataType:"json",async:false};qiao.ajaxopt=function(a){var b=$.extend({},qiao.ajaxoptions);if(typeof a=="string")b.url=a;else $.extend(b,a);return b};
qiao.ajax=function(a){if(a){var b;$.ajax(qiao.ajaxopt(a)).done(function(c){b=c});return b}else alert("need options")};qiao.on=function(a,b,c){$(document).off(b,a).on(b,a,c)};bootstrapQ={};bootstrapQ.modaloptions={url:"",fade:"fade",close:true,title:"title",btn:false,okbtn:"\u786e\u5b9a",qubtn:"\u53d6\u6d88",msg:"msg",big:false,show:false,remote:false,backdrop:"static",keyboard:true,style:""};
bootstrapQ.modalstr=function(a){var b='<div class="modal '+a.fade+'" id="bsmodal" tabindex="-1" role="dialog" aria-labelledby="bsmodaltitle" aria-hidden="true" style="position:fixed;top:20px;'+a.style+'">';b+=a.big?'<div class="modal-dialog modal-lg"><div class="modal-content">':'<div class="modal-dialog"><div class="modal-content">';var c='<div class="modal-header">';if(a.close)c+='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>';
c+='<h3 class="modal-title" id="bsmodaltitle">'+a.title+"</h3></div>";var d='<div class="modal-body"><p><h4>'+a.msg+"</h4></p></div>",e='<div class="modal-footer"><button type="button" class="btn btn-primary bsok">'+a.okbtn+"</button>";if(a.btn)e+='<button type="button" class="btn btn-default bscancel">'+a.qubtn+"</button>";e+="</div>";return b+c+d+e+"</div></div></div>"};
bootstrapQ.alert=function(a,b){var c=$.extend({},bootstrapQ.modaloptions);c.title="\u63d0\u793a";if(typeof a=="string")c.msg=a;else $.extend(c,a);$("body").append(bootstrapQ.modalstr(c));var d=$("#bsmodal");d.modal(c);qiao.on("button.bsok","click",function(){b&&b();d.modal("hide")});qiao.on("#bsmodal","hidden.bs.modal",function(){d.remove()});d.modal("show")};
bootstrapQ.confirm=function(a,b,c){var d=$.extend({},bootstrapQ.modaloptions);d.title="\u786e\u8ba4\u64cd\u4f5c";if(typeof a=="string")d.msg=a;else $.extend(d,a);d.btn=true;$("body").append(bootstrapQ.modalstr(d));var e=$("#bsmodal");e.modal(d);qiao.on("button.bsok","click",function(){b&&b();e.modal("hide")});qiao.on("button.bscancel","click",function(){c&&c();e.modal("hide")});qiao.on("#bsmodal","hidden.bs.modal",function(){e.remove()});e.modal("show")};
bootstrapQ.dialog=function(a,b){var c=$.extend({},bootstrapQ.modaloptions,a);c.big=true;$("body").append(bootstrapQ.modalstr(c));a=qiao.ajax({url:a.url,dataType:"html"});$("#bsmodal div.modal-body").empty().append(a);var d=$("#bsmodal");d.modal(c);qiao.on("button.bsok","click",function(){var e=true;if(b)e=b();e&&d.modal("hide")});qiao.on("#bsmodal","hidden.bs.modal",function(){d.remove()});d.modal("show")};bootstrapQ.msgoptions={msg:"msg",type:"info",time:2E3};
bootstrapQ.msgstr=function(a,b){return'<div class="alert alert-'+b+' alert-dismissible" role="alert" style="display:none;position:fixed;top:0;left:0;width:100%;z-index:2001;margin:0;text-align:center;" id="bsalert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>'+a+"</div>"};
bootstrapQ.msg=function(a){var b=$.extend({},bootstrapQ.msgoptions);if(typeof a=="string")b.msg=a;else $.extend(b,a);$("body").prepend(bootstrapQ.msgstr(b.msg,b.type));$("#bsalert").slideDown();setTimeout(function(){$("#bsalert").slideUp(function(){$("#bsalert").remove()})},b.time)};bootstrapQ.popoptions={animation:true,container:"body",content:"content",html:true,placement:"bottom",title:"",trigger:"hover"};
$.fn.bstip=function(a){var b=$.extend({},bootstrapQ.popoptions);if(typeof a=="string")b.title=a;else $.extend(b,a);$(this).data(b).tooltip()};$.fn.bspop=function(a){var b=$.extend({},bootstrapQ.popoptions);if(typeof a=="string")b.content=a;else $.extend(b,a);$(this).popover(b)};bootstrapQ.tree={};bootstrapQ.tree.options={url:"/ucenter/menu",height:"600px",open:true,edit:false,checkbox:false,showurl:true};
$.fn.bstree=function(a){var b=$.extend({},bootstrapQ.tree.options);if(a)if(typeof a=="string")b.url=a;else $.extend(b,a);a="\u52a0\u8f7d\u5931\u8d25\uff01";var c=qiao.ajax(b.url+"/tree");if(c&&c.object){c=c.object;a='<div class="panel panel-info"><div class="panel-body" ';if(b.height!="auto")a+='style="height:600px;overflow-y:auto;"';a+='><ul class="nav nav-list sidenav" id="treeul" data="url:'+b.url+';">';b=bootstrapQ.tree.sub(c,b);a=a+b+"</ul></div></div>"}$(this).empty().append(a);bootstrapQ.tree.init()};
bootstrapQ.tree.sub=function(a,b){var c="";if(a){c='<li><a href="javascript:void(0);" data="id:'+a.id+";url:"+a.url+';"><span class="glyphicon glyphicon-minus"></span>';if(b.checkbox){c+='<input type="checkbox" class="treecheckbox" ';if(a.checked)c+="checked";c+="/>"}c+=a.text;if(b.showurl)c+="("+a.url+")";if(b.edit)c+='&nbsp;&nbsp;<span class="label label-primary bstreeadd">\u6dfb\u52a0\u5b50\u83dc\u5355</span>&nbsp;&nbsp;<span class="label label-primary bstreeedit">\u4fee\u6539</span>&nbsp;&nbsp;<span class="label label-danger  bstreedel">\u5220\u9664</span>';
c+="</a>";var d=a.children;if(d&&d.length>0){c+='<ul style="padding-left:20px;" id="treeid_'+a.id+'" class="nav collapse ';if(b.open)c+="in";c+='">';for(a=0;a<d.length;a++)c+=bootstrapQ.tree.sub(d[a],b);c+="</ul>"}c+="</li>"}return c};
bootstrapQ.tree.init=function(){qiao.on("#treeul .glyphicon-minus","click",function(){if($(this).parent().next().length>0){$("#treeid_"+$(this).parents("a").qdata().id).collapse("hide");$(this).removeClass("glyphicon-minus").addClass("glyphicon-plus")}});qiao.on("#treeul .glyphicon-plus","click",function(){if($(this).parent().next().length>0){$("#treeid_"+$(this).parents("a").qdata().id).collapse("show");$(this).removeClass("glyphicon-plus").addClass("glyphicon-minus")}});qiao.on("input.treecheckbox",
"change",function(){var a=$(this).prop("checked");$(this).parent().next().find("input.treecheckbox").each(function(){$(this).prop("checked",a)});var b=true,c=$(this).parent().parent().parent();c.children().each(function(){$(this).children().children("input").prop("checked")||(b=false)});c.prev().children("input").prop("checked",b)});bootstrapQ.tree.url=$("#treeul").qdata().url;if(bootstrapQ.tree.url){qiao.on(".bstreeadd","click",bootstrapQ.tree.addp);qiao.on(".bstreedel","click",bootstrapQ.tree.del);
qiao.on(".bstreeedit","click",bootstrapQ.tree.editp)}};bootstrapQ.tree.addp=function(){bootstrapQ.dialog({url:bootstrapQ.tree.url+"/add/"+$(this).parent().qdata().id,title:"\u6dfb\u52a0\u5b50\u83dc\u5355",okbtn:"\u4fdd\u5b58"},function(){})};bootstrapQ.tree.del=function(){var a=qiao.ajax({url:bootstrapQ.tree.url+"/del/"+$(this).parent().qdata().id});bootstrapQ.msg(a)};bootstrapQ.tree.editp=function(){bootstrapQ.dialog({url:bootstrapQ.tree.url+"/savep?id="+$(this).parent().qdata().id,title:"\u4fee\u6539\u83dc\u5355",okbtn:"\u4fdd\u5b58"},function(){})};
bootstrapQ.bstrooptions={width:"500px",html:"true",nbtext:"\u4e0b\u4e00\u6b65",place:"bottom",title:"\u7f51\u7ad9\u4f7f\u7528\u5f15\u5bfc",content:"content"};
bootstrapQ.bstroinit=function(a,b,c){if(a){a=$(a);if(a.length>0){var d=$.extend({},bootstrapQ.bstrooptions,b);if(typeof b=="string")d.content=b;else $.extend(d,b);a.each(function(){$(this).attr({"data-bootstro-width":d.width,"data-bootstro-title":d.title,"data-bootstro-html":d.html,"data-bootstro-content":d.content,"data-bootstro-placement":d.place,"data-bootstro-nextButtonText":d.nbtext,"data-bootstro-step":c}).addClass("bootstro")})}}};
bootstrapQ.bstroopts={prevButtonText:"\u4e0a\u4e00\u6b65",finishButton:'<button class="btn btn-lg btn-success bootstro-finish-btn"><i class="icon-ok"></i>\u5b8c\u6210</button>',stopOnBackdropClick:false,stopOnEsc:false};
bootstrapQ.bstro=function(a,b){if(a&&a.length>0){for(var c=0;c<a.length;c++)bootstrapQ.bstroinit(a[c][0],a[c][1],c);a=$.extend({},bootstrapQ.bstroopts);if(b){if(b.hasOwnProperty("pbtn"))a.prevButtonText=b.pbtn;if(b.hasOwnProperty("obtn"))a.finishButton=b.obtn==""?"":'<button class="btn btn-mini btn-success bootstro-finish-btn"><i class="icon-ok"></i>'+b.obtn+"</button>";if(b.hasOwnProperty("stop")){a.stopOnBackdropClick=b.stop;a.stopOnEsc=b.stop}if(b.hasOwnProperty("exit"))a.onExit=b.exit}bootstro.start(".bootstro",
a)}};
